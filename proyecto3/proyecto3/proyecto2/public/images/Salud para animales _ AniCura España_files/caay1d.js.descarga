window.jentis=window.jentis||{},window.jentis.config=window.jentis.config||{},window.jentis.config.account="anicuragroup_com.live",window.jentis.config.trackdomain="https://71t1hg.anicuragroup.com",window.jentis.config.filehash="caay1d",window.jentis.config.loadcss=!1,window.jentis.userCustomizable=window.jentis.userCustomizable||{},window.jentisApp=window.jentisApp||{};try{window.jentisApp.reprocessingCache_activate_reset=function(){void 0!==window.jentis.tracker&&void 0!==window.jentis.tracker.setUserCustomization&&window.jentis.tracker.setUserCustomization("reprocessCacheReset",!0),window.jentis.userCustomizable.reprocessCacheReset=!0},window.jentisApp.reprocessingCache_deactivate_reset=function(){void 0!==window.jentis.tracker&&void 0!==window.jentis.tracker.setUserCustomization&&window.jentis.tracker.setUserCustomization("reprocessCacheReset",!1),window.jentis.userCustomizable.reprocessCacheReset=!1},window.jentis.config.jtm=window.jentis.config.jtm||{},window.jentis.config.jtm.timestamp=1704544774,window.jentis.config.jtm.version=2,window.jentis.config.jtm.maximumStorageLifetime=63072e6,window.jentis.config.jtm.hybridTracking=!1,window.jentis.config.jtm.accountconstants={currency:"EUR","GA4_serverside_global-ga_measurement_id":"G-SV2L92PWG9","GA4_serverside_global-debugview_mode":"","GA4_serverside_global-ignore_referrer_list":"","GA4_country_specific_server_side-ga_measurement_id":"","GA4_country_specific_server_side-debugview_mode":"","GA4_country_specific_server_side-ignore_referrer_list":""},window.jentis.config.jtm.plugins={},window.jentis.config.jtm.template_variables={"jentis.core.jtm.plugin.template_variable.get_gtm_data_layer_value":{scope:"EVENT",triggerRelated:!1,value:function(e){return function(r,i,n){for(var a=window[e.placeholder.datalayer_name]||[],o=[],s=r.split("."),c=s[0],d=0;d<a.length;d++)""!=n&&a[d].event!==n||void 0===a[d][c]||o.push(s.length>1?t(a[d],s):a[d][r]);return"first"==i?o.length>0?o[0]:"":"last"==i?o.length>0?o[o.length-1]:"":"unexpected opointer value"}(e.placeholder.parameter_name,e.placeholder.occurence_pointer,e.placeholder.event_name);function t(e,t){for(var r=0;r<t.length;r++){if(void 0===e[t[r]]||null===e[t[r]])return null;e=e[t[r]]}return e}}},"jentis.core.jtm.plugin.template_variable.click_trigger_properties":{scope:"EVENT",triggerRelated:!1,value:function(args){var prop=args.placeholder.element_prop,elem=null;if(this.checkIfNumber=function(e){return/^\d*\.?\d+$/.test(null!==e&&""!==e&&void 0!==e?e:NaN)},void 0!==arguments&&"object"==typeof arguments&&void 0!==arguments[0].element)if(args.placeholder.is_logging&&console.log(arguments),args.placeholder.is_complex_object){for(var arrPropz=prop.split("."),strElem="arguments[0].element",i=0;i<arrPropz.length;i++)if(strElem+=this.checkIfNumber(arrPropz[i])?"["+arrPropz[i]+"]":"['"+arrPropz[i]+"']",!eval("typeof "+strElem+" !== 'undefined'"))return console.log("[JTS] Element doesn't exist: "+strElem),null;elem=eval(strElem)}else if(void 0!==arguments[0].element.attributes&&void 0!==arguments[0].element.attributes[prop])elem=arguments[0].element.attributes[prop].value;else{if(void 0===arguments[0].element[prop])return console.log("[JTS] Element doesn't exist: arguments[0].element[\""+prop+'"]'),null;elem=arguments[0].element[prop]}return elem}}},window.jentis.config.jtm.variables={jtspushedcommands:{scope:"EVENT",value:function(){return window.jentis.tracker.getDatalayer(!1)},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},document_title:{scope:"EVENT",value:function(){return document.title},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_language:{scope:"SESSION",value:function(){return window.navigator.language},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},window_location_href:{scope:"EVENT",value:function(){return window.location.href},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},document_ref:{scope:"EVENT",value:function(){return document.referrer},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},page_load_happened:{scope:"EVENT",value:function(){return void 0===window.jentis.cache&&(window.jentis.cache={}),void 0===window.jentis.cache["jentis.core.jtm.plugin.variable.page_load_happened"]&&(window.jentis.cache["jentis.core.jtm.plugin.variable.page_load_happened"]=!0,!0)},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_term:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"search");return e.length>0&&void 0!==e[0].term?e[0].term:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},"random_number_per_page-load":{scope:"EVENT",value:function(){return void 0===window.jentis.cache&&(window.jentis.cache={}),void 0===window.jentis.cache["jentis.core.jtm.plugin.variable.random_number_per_page-load"]&&(window.jentis.cache["jentis.core.jtm.plugin.variable.random_number_per_page-load"]=Math.floor(2147483647*Math.random())),window.jentis.cache["jentis.core.jtm.plugin.variable.random_number_per_page-load"]},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},active_time_on_page:{scope:"EVENT",value:function(){return void 0===window.jentis.cache&&(window.jentis.cache={}),void 0===window.jentis.cache["jentis.core.jtm.plugin.variable.active_time_on_page"]&&(window.jentis.cache["jentis.core.jtm.plugin.variable.active_time_on_page"]={instance:void 0,Sa:function(){return new Date(Date.now()).getTime()},dc:function(e,t,r,i){e.addEventListener?e.addEventListener(t,r,!!i):e.attachEvent&&e.attachEvent("on"+t,r)},Uf:function(){return this.D&&this.isVisible&&this.isActive},Ty:function(e){var t=0,r=0,i=this;return{start:function(){t=i.Sa()},stop:function(){r=this.get()},get:function(){var e=0;return i.Uf()&&(e=i.Sa()-t),e+r}}},timeFunc:function(e){var t=this;this.h=this.Ty(),this.D=window.document.hasFocus(),this.isVisible=!window.document.hidden,this.isActive=!0;var r=function(e,r,i){t.dc(e,r,(function(e){t.h.stop(),i(e),t.Uf()&&t.h.start()}))};return r(window,"focus",(function(){t.D=!0})),r(window,"blur",(function(){t.D=!1})),r(window,"pageshow",(function(e){t.isActive=!0})),r(window,"pagehide",(function(){t.isActive=!1})),r(window.document,"visibilitychange",(function(){t.isVisible=!window.document.hidden})),this.h.start(),this.h}},window.jentis.cache["jentis.core.jtm.plugin.variable.active_time_on_page"].instance=window.jentis.cache["jentis.core.jtm.plugin.variable.active_time_on_page"].timeFunc()),window.jentis.cache["jentis.core.jtm.plugin.variable.active_time_on_page"].instance.get()},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_user_agent_model:{scope:"SESSION",value:function(e){if(void 0===window.navigator.userAgentData||"undefined"===window.navigator.userAgentData.getHighEntropyValues)return"";window.navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((function(t){e.callback(t.model)}))},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_user_agent_wow64:{scope:"SESSION",value:function(e){if(void 0===window.navigator.userAgentData||"undefined"===window.navigator.userAgentData.getHighEntropyValues)return"";window.navigator.userAgentData.getHighEntropyValues(["wow64"]).then((function(t){e.callback(t.wow64)}))},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},window_screen_width:{scope:"SESSION",value:function(){return window.screen.width},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},window_screen_height:{scope:"SESSION",value:function(){return window.screen.height},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_user_agent_mobile:{scope:"SESSION",value:function(e){if(void 0===window.navigator.userAgentData||"undefined"===window.navigator.userAgentData.getHighEntropyValues)return"";window.navigator.userAgentData.getHighEntropyValues(["mobile"]).then((function(t){e.callback(t.mobile)}))},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_user_agent_bitness:{scope:"SESSION",value:function(e){if(void 0===window.navigator.userAgentData||"undefined"===window.navigator.userAgentData.getHighEntropyValues)return"";window.navigator.userAgentData.getHighEntropyValues(["bitness"]).then((function(t){e.callback(t.bitness)}))},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_id:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_id?decodeURIComponent(e.utm_id):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_user_agent_platform:{scope:"SESSION",value:function(e){if(void 0===window.navigator.userAgentData||"undefined"===window.navigator.userAgentData.getHighEntropyValues)return"";window.navigator.userAgentData.getHighEntropyValues(["platform"]).then((function(t){e.callback(t.platform)}))},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_creative_format:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_creative_format?decodeURIComponent(e.utm_creative_format):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_marketing_tactic:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_marketing_tactic?decodeURIComponent(e.utm_marketing_tactic):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_source_platform:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_source_platform?decodeURIComponent(e.utm_source_platform):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_term:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_term?decodeURIComponent(e.utm_term):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_user_agent_full_version_list:{scope:"SESSION",value:function(e){if(void 0===window.navigator.userAgentData||"undefined"===window.navigator.userAgentData.getHighEntropyValues)return"";window.navigator.userAgentData.getHighEntropyValues(["fullVersionList"]).then((function(t){var r="";void 0!==t&&void 0!==t.fullVersionList&&"function"==typeof t.fullVersionList.map&&(r=t.fullVersionList.map((function(e){return encodeURIComponent(e.brand||"")+";"+encodeURIComponent(e.version||"")})).join("|")),e.callback(r)}))},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_medium:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_medium?decodeURIComponent(e.utm_medium):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_source:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_source?decodeURIComponent(e.utm_source):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_user_agent_architecture:{scope:"SESSION",value:function(e){if(void 0===window.navigator.userAgentData||"undefined"===window.navigator.userAgentData.getHighEntropyValues)return"";window.navigator.userAgentData.getHighEntropyValues(["architecture"]).then((function(t){e.callback(t.architecture)}))},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_content:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_content?decodeURIComponent(e.utm_content):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},search_param_utm_campaign:{scope:"EVENT",value:function(){try{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,r,i){e[r]=i}));return void 0!==e.utm_campaign?decodeURIComponent(e.utm_campaign):""}catch(e){return""}},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},navigator_user_agent_platform_version:{scope:"SESSION",value:function(e){if(void 0===window.navigator.userAgentData||"undefined"===window.navigator.userAgentData.getHighEntropyValues)return"";window.navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((function(t){e.callback(t.platformVersion)}))},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},order_tax:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"order");return e.length>0&&void 0!==(e=e[e.length-1]).tax?e.tax:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},order_coupon:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"order");return e.length>0&&void 0!==(e=e[e.length-1]).coupon?e.coupon:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_id:{scope:"EVENT",value:function(){var e=[],t=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==t)for(var r=0;r<t.length;r++)void 0!==t[r].id?e.push(t[r].id):e.push("");return e},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_name:{scope:"EVENT",value:function(){var e="name",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_brand:{scope:"EVENT",value:function(){var e="brand",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_position:{scope:"EVENT",value:function(){var e="position",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_price:{scope:"EVENT",value:function(){var e="brutto",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_coupon:{scope:"EVENT",value:function(){var e="coupon",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_location_id:{scope:"EVENT",value:function(){var e="locationid",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_id_arraylist:{scope:"EVENT",value:function(){var e=[],t=window.jentis.tracker.getDatalayer(!0,"promotion");if(void 0!==t)for(var r=0;r<t.length;r++)void 0!==t[r].id?e.push(t[r].id):e.push("");return e},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_creative_arraylist:{scope:"EVENT",value:function(){var e="creative",t=[],r=window.jentis.tracker.getDatalayer(!0,"promotion");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_creative_slot_arraylist:{scope:"EVENT",value:function(){var e="creativeslot",t=[],r=window.jentis.tracker.getDatalayer(!0,"promotion");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},productlist_id_of_product:{scope:"EVENT",value:function(){var e="productlist_id",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_variant:{scope:"EVENT",value:function(){var e="variant",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i].customvars&&void 0!==r[i].customvars[e]?t.push(r[i].customvars[e]):void 0!==r[i]&&void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_category_1st:{scope:"EVENT",value:function(){var e="group",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)"object"==typeof r[i][e]&&r[i][e].length>0&&void 0!==r[i][e][0]?t.push(r[i][e][0]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_discount_raw:{scope:"EVENT",value:function(){var e="discount",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_quantity:{scope:"EVENT",value:function(){var e="quantity",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_name_arraylist:{scope:"EVENT",value:function(){var e="name",t=[],r=window.jentis.tracker.getDatalayer(!0,"promotion");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_category_2nd:{scope:"EVENT",value:function(){var e="group",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)"object"==typeof r[i][e]&&r[i][e].length>0&&void 0!==r[i][e][1]?t.push(r[i][e][1]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_category_3rd:{scope:"EVENT",value:function(){var e="group",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)"object"==typeof r[i][e]&&r[i][e].length>0&&void 0!==r[i][e][2]?t.push(r[i][e][2]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_category_4th:{scope:"EVENT",value:function(){var e="group",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)"object"==typeof r[i][e]&&r[i][e].length>0&&void 0!==r[i][e][3]?t.push(r[i][e][3]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_category_5th:{scope:"EVENT",value:function(){var e="group",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)"object"==typeof r[i][e]&&r[i][e].length>0&&void 0!==r[i][e][4]?t.push(r[i][e][4]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_affiliation:{scope:"EVENT",value:function(){var e="affiliation",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},productlist_name_of_product:{scope:"EVENT",value:function(){var e="productlist_name",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},order_shipping:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"order");return e.length>0&&void 0!==(e=e[e.length-1]).shipping?e.shipping:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},order_brutto:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"order");return e.length>0&&void 0!==(e=e[e.length-1]).brutto?e.brutto:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},order_id:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"order");return e.length>0&&"undefined"!==(e=e[e.length-1]).orderid?e.orderid:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},product_type:{scope:"EVENT",value:function(){var e="type",t=[],r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},gtm_pageid:{template:"jentis.core.jtm.plugin.template_variable.get_gtm_data_layer_value",placeholder:{event_name:"Page Impression",datalayer_name:"dataLayer",parameter_name:"pageId",occurence_pointer:"last"},evaluateFirst:[],dependencies:[],vendorids:["google_analytics_4_server-side"]},gtm_pagename:{template:"jentis.core.jtm.plugin.template_variable.get_gtm_data_layer_value",placeholder:{event_name:"Page Impression",datalayer_name:"dataLayer",parameter_name:"pageName",occurence_pointer:"last"},evaluateFirst:[],dependencies:[],vendorids:["google_analytics_4_server-side"]},gtm_pagetype:{template:"jentis.core.jtm.plugin.template_variable.get_gtm_data_layer_value",placeholder:{event_name:"Page Impression",datalayer_name:"dataLayer",parameter_name:"pageType",occurence_pointer:"last"},evaluateFirst:[],dependencies:[],vendorids:["google_analytics_4_server-side"]},html_language_attribute:{scope:"EVENT",value:function(){return document.documentElement.lang},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},one_trust_active_groups:{template:"jentis.core.jtm.plugin.template_variable.get_gtm_data_layer_value",placeholder:{event_name:"OneTrustLoaded",datalayer_name:"dataLayer",parameter_name:"OnetrustActiveGroups",occurence_pointer:"last"},evaluateFirst:[],dependencies:[],vendorids:["google_analytics_4_server-side"]},cartview_brutto:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"cartview");return e.length>0&&void 0!==(e=e[e.length-1]).brutto?e.brutto:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},productview_brutto:{scope:"EVENT",value:function(){var e="brutto",t=0,r=window.jentis.tracker.getDatalayer(!0,"product");if(void 0!==r)for(var i=0;i<r.length;i++)if(void 0!==r[i].type&&"productview"===r[i].type&&void 0!==r[i][e]){t=r[i][e];break}return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},addtocart_sumbrutto:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"product"),t=0,r=0,i=0,n=0;if(void 0!==e)for(var a=0;a<e.length;a++)void 0!==e[a].type&&"addtocart"===e[a].type&&(t=void 0!==e[a].brutto?e[a].brutto:0,r=void 0!==e[a].quantity?e[a].quantity:1,i=void 0!==e[a].discount?e[a].discount:0,n+=Math.round(t*r*100)/100-i);return n},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},productlistclick_id:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"productlistclick");return e.length>0&&void 0!==(e=e[e.length-1]).id?e.id:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},productlistclick_name:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"productlistclick");return e.length>0&&void 0!==(e=e[e.length-1]).name?e.name:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},checkout_step:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"checkout");return e.length>0&&void 0!==(e=e[e.length-1]).step&&null!==e.step?e.step:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},checkout_coupon:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"checkout");return e.length>0&&void 0!==(e=e[e.length-1]).coupon?e.coupon:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},checkout_brutto:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"checkout");return e.length>0&&void 0!==(e=e[e.length-1]).brutto?e.brutto:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},productlist_id:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"productlist");return e.length>0&&void 0!==(e=e[e.length-1]).id?e.id:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},productlist_name:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"productlist");return e.length>0&&void 0!==(e=e[e.length-1]).name?e.name:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_position_arraylist:{scope:"EVENT",value:function(){var e="position",t=[],r=window.jentis.tracker.getDatalayer(!0,"promotion");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_id:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"promotionimpression");return e.length>0&&void 0!==(e=e[e.length-1]).id?e.id:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_creative:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"promotionimpression");return e.length>0&&void 0!==(e=e[e.length-1]).creative?e.creative:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_creative_slot:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"promotionimpression");return e.length>0&&void 0!==(e=e[e.length-1]).creativeslot?e.creativeslot:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_name:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"promotionimpression");return e.length>0&&void 0!==(e=e[e.length-1]).name?e.name:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_type:{scope:"EVENT",value:function(){var e="type",t=[],r=window.jentis.tracker.getDatalayer(!0,"promotion");if(void 0!==r)for(var i=0;i<r.length;i++)void 0!==r[i][e]?t.push(r[i][e]):t.push("");return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},addtowishlist_sumbrutto:{scope:"EVENT",value:function(){for(var e=window.jentis.tracker.getDatalayer(!0,"product"),t=0,r=0;r<e.length;r++)void 0!==e[r].type&&"addtowishlist"===e[r].type&&void 0!==e[r].brutto&&void 0!==e[r].quantity&&(t+=e[r].brutto*e[r].quantity);return t},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},checkout_paytype:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"checkout");return e.length>0&&void 0!==(e=e[e.length-1]).paytype&&null!==e.paytype?e.paytype:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotionclick_id:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"promotionclick");return e.length>0&&void 0!==(e=e[e.length-1]).id?e.id:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotionclick_creative:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"promotionclick");return e.length>0&&void 0!==(e=e[e.length-1]).creative?e.creative:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotion_click_creative_slot:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"promotionclick");return e.length>0&&void 0!==(e=e[e.length-1]).creativeslot?e.creativeslot:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},promotionclick_name:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"promotionclick");return e.length>0&&void 0!==(e=e[e.length-1]).name?e.name:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},shipping_tier:{scope:"EVENT",value:function(){var e=window.jentis.tracker.getDatalayer(!0,"checkout");return e.length>0&&void 0!==(e=e[e.length-1]).shipping_tier&&null!==e.shipping_tier?e.shipping_tier:""},triggerRelated:!1,dependencies:[],vendorids:["google_analytics_4_server-side"]},click_link_href:{template:"jentis.core.jtm.plugin.template_variable.click_trigger_properties",placeholder:{is_logging:!0,element_prop:"href",is_complex_object:!1},evaluateFirst:[],dependencies:[],vendorids:["google_analytics_4_server-side"]},booking_url:{template:"jentis.core.jtm.plugin.template_variable.get_gtm_data_layer_value",placeholder:{event_name:"Booking click",datalayer_name:"dataLayer",parameter_name:"bookingUrl",occurence_pointer:"last"},evaluateFirst:[],dependencies:[],vendorids:["google_analytics_4_server-side"]},booking_source:{template:"jentis.core.jtm.plugin.template_variable.get_gtm_data_layer_value",placeholder:{event_name:"Booking click",datalayer_name:"dataLayer",parameter_name:"bookingSource",occurence_pointer:"last"},evaluateFirst:[],dependencies:[],vendorids:["google_analytics_4_server-side"]},currency:{scope:"ACCOUNT",value:"EUR"},"GA4_serverside_global-ga_measurement_id":{tracker:"2",scope:"ACCOUNT",value:"G-SV2L92PWG9"},"GA4_serverside_global-debugview_mode":{tracker:"2",scope:"ACCOUNT",value:""},"GA4_serverside_global-ignore_referrer_list":{tracker:"2",scope:"ACCOUNT",value:""},"GA4_country_specific_server_side-ga_measurement_id":{tracker:"4",scope:"ACCOUNT",value:""},"GA4_country_specific_server_side-debugview_mode":{tracker:"4",scope:"ACCOUNT",value:""},"GA4_country_specific_server_side-ignore_referrer_list":{tracker:"4",scope:"ACCOUNT",value:""}},window.jentis.config.jtm.pluginIDtoVendorID={"google_analytics_4_server-side":{2:"google_analytics_4_server-side",4:"google_analytics_4_server-side"}},window.jentis.config.jtm.states={jts_push_submit:function(e){var t=_jts.push,r=!1,i=!1,n=["event","addtocart","removefromcart","addtowishlist","removefromwishlist","productlistclick","promotionclick"],a=function(e){var r=window.jentis.tracker.getDatalayer(!0,e),i={};if(r.length>0&&(r=r[r.length-1],Object.keys(r).length>0))for(var n in r)"track"!==n&&(i[n]=r[n]);Object.keys(i).length>0&&(i.track="promotion",window.jentis.tracker.log("[J-TRACKER] "+e+" push transformed."),t(i))},o=function(e,t){if(t)for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},s=function(){for(var s={stateCallback:function(){window.jentis.tracker.resetDatalayer()}},c=0;c<arguments.length;c++){var d=arguments[c];(void 0===r||void 0!==r&&!0===r)&&t(d),void 0!==d.track?(o(n,d.track)&&(i=!0),i&&(s.requestType="sendBeacon"),"submit"===d.track||"event"===d.track?(i=!1,e(s)):"promotionimpression"!==d.track&&"promotionclick"!==d.track||(a(d.track),e(s))):"boolean"==typeof d&&!0===d&&(i=!1,e(s))}};if("object"==typeof _jts)for(var c=0;c<_jts.length;c++)s(_jts[c]);r=!0,_jts.push=s},page_load:function(e){void 0!==e&&("complete"===document.readyState?e():window.addEventListener("load",(function(){setTimeout(e,0)})))},page_transition_event:function(e){var t={requestType:"sendBeacon"},r=function(r){e(t)},i=navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(i);i.indexOf("Firefox")>-1||n?window.addEventListener("pagehide",r):(t.stateCallback=function(){window.removeEventListener("beforeunload",r)},window.addEventListener("beforeunload",r))},booking_click:function(e){var t=["Booking click"],r=!0,n="dataLayer",a=window[n]||[];Array.isArray(a)&&a.length&&a.length>0&&a.forEach((e=>{s(e.event)}));var o=a.push;function s(n){if(Array.isArray(t)&&t.length>0&&void 0!==n){if(r)for(n=n.toLowerCase(),i=0;i<t.length;i++)t[i]=t[i].toLowerCase();t.includes(n)&&e()}else void 0!==n&&e()}a.push=function(e){o.call(window[n],e),s(e.event)},window[n]=a},breedguidestarted:function(e){var t=["breedGuideStarted"],r=!0,n="dataLayer",a=window[n]||[];Array.isArray(a)&&a.length&&a.length>0&&a.forEach((e=>{s(e.event)}));var o=a.push;function s(n){if(Array.isArray(t)&&t.length>0&&void 0!==n){if(r)for(n=n.toLowerCase(),i=0;i<t.length;i++)t[i]=t[i].toLowerCase();t.includes(n)&&e()}else void 0!==n&&e()}a.push=function(e){o.call(window[n],e),s(e.event)},window[n]=a},breedguidecomplete:function(e){var t=["breedGuideComplete"],r=!0,n="dataLayer",a=window[n]||[];Array.isArray(a)&&a.length&&a.length>0&&a.forEach((e=>{s(e.event)}));var o=a.push;function s(n){if(Array.isArray(t)&&t.length>0&&void 0!==n){if(r)for(n=n.toLowerCase(),i=0;i<t.length;i++)t[i]=t[i].toLowerCase();t.includes(n)&&e()}else void 0!==n&&e()}a.push=function(e){o.call(window[n],e),s(e.event)},window[n]=a}},window.jentis.config.jtm.selectorActions={click_telephone_number:{selector:'a[href^="tel:"]',action:"click"}},window.jentis.config.jtm.trigger={search:{excludeTrigger:[],condition:[[{value:"search",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","search_term","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},order:{excludeTrigger:[],condition:[[{value:"order",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","order_tax","document_title","order_coupon","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","order_shipping","page_load_happened","order_brutto","random_number_per_page-load","order_id","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},page_loaded:{excludeTrigger:[],condition:[],variables:["document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","random_number_per_page-load","active_time_on_page","gtm_pageid","gtm_pagename","gtm_pagetype","html_language_attribute","one_trust_active_groups","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"page_load"},cartview:{excludeTrigger:[],condition:[[{value:"cartview",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","cartview_brutto","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},productview:{excludeTrigger:[],condition:[[{value:"productview",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","productview_brutto","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},addtocart:{excludeTrigger:[],condition:[[{value:"addtocart",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","addtocart_sumbrutto","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},productlistclick:{excludeTrigger:[],condition:[[{value:"productlistclick",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","productlistclick_id","productlistclick_name","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},initiatecheckout:{excludeTrigger:[],condition:[[{value:"checkout",operator:"co",variable:"jtspushedcommands"},{value:1,operator:"eq",variable:"checkout_step"}]],variables:["jtspushedcommands","checkout_step","document_title","checkout_coupon","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","checkout_brutto","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},productlist:{excludeTrigger:["productlistclick"],condition:[[{value:"productlist",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","productlist_id","productlist_name","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},promotionimpression:{excludeTrigger:[],condition:[[{value:"promotionimpression",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","product_id","product_name","product_brand","promotion_position_arraylist","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","promotion_id","promotion_creative","promotion_creative_slot","promotion_name","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","promotion_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},addtowishlist:{excludeTrigger:[],condition:[[{value:"addtowishlist",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","addtowishlist_sumbrutto","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},page_transition_trigger:{excludeTrigger:[],condition:[],variables:["document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","random_number_per_page-load","active_time_on_page","window_screen_width","window_screen_height","search_param_utm_id","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","search_param_utm_medium","search_param_utm_source","search_param_utm_content","search_param_utm_campaign","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"page_transition_event"},addpaymentinfo:{excludeTrigger:[],condition:[[{value:"2",operator:"eq",variable:"checkout_step"},{value:"checkout",operator:"co",variable:"jtspushedcommands"}]],variables:["checkout_step","jtspushedcommands","document_title","checkout_coupon","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","checkout_paytype","checkout_brutto","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},removefromcart:{excludeTrigger:[],condition:[[{value:"removefromcart",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},promotionclick:{excludeTrigger:[],condition:[[{value:"promotionclick",operator:"co",variable:"jtspushedcommands"}]],variables:["jtspushedcommands","document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","product_id","product_name","product_brand","promotion_position_arraylist","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","promotionclick_id","promotionclick_creative","promotion_click_creative_slot","promotionclick_name","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","promotion_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},addshippinginfo:{excludeTrigger:[],condition:[[{value:3,operator:"eq",variable:"checkout_step"}]],variables:["checkout_step","document_title","checkout_coupon","currency","navigator_language","window_location_href","product_id","product_name","product_brand","product_position","product_price","product_coupon","product_location_id","promotion_id_arraylist","promotion_creative_arraylist","promotion_creative_slot_arraylist","productlist_id_of_product","product_variant","product_category_1st","product_discount_raw","product_quantity","promotion_name_arraylist","product_category_2nd","product_category_3rd","product_category_4th","product_category_5th","product_affiliation","productlist_name_of_product","document_ref","page_load_happened","shipping_tier","checkout_brutto","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","product_type","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id","GA4_country_specific_server_side-debugview_mode","GA4_country_specific_server_side-ga_measurement_id"],tags:[],codeblocks:[],state:"jts_push_submit"},click_telephone_number:{excludeTrigger:[],condition:[[{value:"tel",operator:"co",variable:"click_link_href"}]],variables:["click_link_href","document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","random_number_per_page-load","active_time_on_page","gtm_pageid","gtm_pagename","gtm_pagetype","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id"],tags:[],codeblocks:[],selector:'a[href^="tel:"]',action:"click"},booking_click:{excludeTrigger:[],condition:[],variables:["document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","random_number_per_page-load","active_time_on_page","booking_url","booking_source","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id"],tags:[],codeblocks:[],state:"booking_click"},breeding_guide_started:{excludeTrigger:[],condition:[],variables:["document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id"],tags:[],codeblocks:[],state:"breedguidestarted"},breed_guide_complete:{excludeTrigger:[],condition:[],variables:["document_title","currency","navigator_language","window_location_href","document_ref","page_load_happened","random_number_per_page-load","active_time_on_page","navigator_user_agent_model","navigator_user_agent_wow64","window_screen_width","window_screen_height","navigator_user_agent_mobile","navigator_user_agent_bitness","search_param_utm_id","navigator_user_agent_platform","search_param_utm_creative_format","search_param_utm_marketing_tactic","search_param_utm_source_platform","search_param_utm_term","navigator_user_agent_full_version_list","search_param_utm_medium","search_param_utm_source","navigator_user_agent_architecture","search_param_utm_content","search_param_utm_campaign","navigator_user_agent_platform_version","GA4_serverside_global-debugview_mode","GA4_serverside_global-ga_measurement_id"],tags:[],codeblocks:[],state:"breedguidecomplete"}},window.jentis.config.jtm.functions={},window.jentis.config.jtm.frontendLibs={"google_analytics_4_server-side":{lib:function(e){},tracker:{2:{ga_measurement_id:"G-SV2L92PWG9",debugview_mode:"",ignore_referrer_list:""},4:{ga_measurement_id:"",debugview_mode:"",ignore_referrer_list:""}}}},window.jentis.config.jtm.frontendTags={},window.jentis.config.jtm.enrichment={},window.jentis.config.jtm.codeblocks={},window.jentis=window.jentis||{},window.jentis.helper=new function(){this.aEventCache={},this.oServerCookies={},this.bMinimalConsentGiven=!1,this.oClientCookiesCache={},this._cacheTrackingMonitorRequests={},this._cacheEventIdToStateName={},this.isSendingToMonitorActive=!1,this.init=function(){this.bIsLocalStorageAvailable=this.checkLocalStorage(),this.listenForJentisTrackerJSInitEvent()},this.listenForJentisTrackerJSInitEvent=function(){this.addEventListener("jentis.tracker.init",(function(){!1!==window.jentis.tracker.getPreviewVersion()&&(window.jentis.helper.isSendingToMonitorActive=!0,window.jentis.helper._startListeningForTrackingMonitorStreams())}))},this.sendErrorToLogSystem=function(e,t){var r=new XMLHttpRequest;r.open("POST","https://jentislog.funkenbox.net/jtslog.php",!0),r.send(JSON.stringify({c:"error",k:window.jentis.config.account,ts:Date.now(),data:e,v:t,page_url:window.document.location.href,fb_payload:window.navigator.userAgent}))},this.checkLocalStorage=function(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},this.addEventListener=function(e,t){if(void 0!==this.aEventCache[e])for(var r=0;r<this.aEventCache[e].length;r++)t({detail:this.aEventCache[e][r]});document.addEventListener(e,(function(e){t(e)}))},this.setEvent=function(e,t,r){var i=e+"."+t;if(void 0===r)r=null;if(void 0===this.aEventCache[i]&&(this.aEventCache[i]=[]),this.aEventCache[i].push(r),"function"==typeof window.CustomEvent)var n=new CustomEvent(i,{detail:r});else(n=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!1,r);document.dispatchEvent(n)},this.setServerCookie=function(e){void 0!==e.name&&void 0!==e.value&&void 0!==e.exdays&&(this.oServerCookies[e.name]=e)},this.getServerCookies=function(){if(!0===this.bMinimalConsentGiven){var e=[];for(var t in this.oServerCookies){var r=this.oServerCookies[t];void 0!==r.vendorids?!0===window.jentis.helper._isMinimumOneConsentGivenOfList(r.vendorids)&&(e.push(r),delete this.oServerCookies[t]):(e.push(r),delete this.oServerCookies[t])}return e}return[]},this.readCookie=function(e){for(var t=e+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var n=r[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null},this.setCookie=function(e){if(!1===this.bMinimalConsentGiven)void 0!==e.name&&(this.oClientCookiesCache[e.name]=e);else if(void 0===e.vendorids||void 0!==e.vendorids&&!0===window.jentis.helper._isMinimumOneConsentGivenOfList(e.vendorids)){var t=new Date;if(null!==e.exdays&&"object"==typeof e.exdays){(i=1e3*(60*(void 0!==e.exdays.h?e.exdays.h:0)*60+60*(void 0!==e.exdays.m?e.exdays.m:0)+(void 0!==e.exdays.s?e.exdays.s:0)))>window.jentis.config.jtm.maximumStorageLifetime&&(i=window.jentis.config.jtm.maximumStorageLifetime);var r=t.getTime()+i;t.setTime(r)}else{var i;(i=24*e.exdays*60*60*1e3)>window.jentis.config.jtm.maximumStorageLifetime&&(i=window.jentis.config.jtm.maximumStorageLifetime);r=t.getTime()+i;t.setTime(r)}var n=window.jentis.config.trackdomain.split(".");n[0]="";var a=n.join("."),o=encodeURIComponent(e.value)+"; path=/; domain="+a+(null==e.exdays?"":"; expires="+t.toUTCString())+(void 0!==e.sameSite?"; SameSite="+e.sameSite:"")+(void 0!==e.bSecure&&!0===e.bSecure?"; Secure="+e.bSecure:"");document.cookie=e.name+"="+o}else void 0!==e.name&&(this.oClientCookiesCache[e.name]=e)},this.setLocalStorageItem=function(e,t,r){if(!0===window.jentis.helper.bIsLocalStorageAvailable){var i=new Date;r?r>window.jentis.config.jtm.maximumStorageLifetime&&(r=window.jentis.config.jtm.maximumStorageLifetime):r=window.jentis.config.jtm.maximumStorageLifetime;var n={value:t,ttl:r,expiry:i.getTime()+r};return window.localStorage.setItem(e,JSON.stringify(n)),!0}return!1},this.getLocalStorageItem=function(e){if(!0===window.jentis.helper.bIsLocalStorageAvailable){var t=window.localStorage.getItem(e);if(!t)return null;var r="",i=new Date;try{void 0===(r=JSON.parse(t)).expiry&&void 0===r.ttl&&(r={value:r,ttl:window.jentis.config.jtm.maximumStorageLifetime,expiry:i.getTime()+window.jentis.config.jtm.maximumStorageLifetime})}catch(e){r={value:t,ttl:window.jentis.config.jtm.maximumStorageLifetime,expiry:i.getTime()+window.jentis.config.jtm.maximumStorageLifetime}}return i.getTime()>r.expiry?(window.localStorage.removeItem(e),null):(window.jentis.helper.setLocalStorageItem(e,r.value,r.ttl),r.value)}return null},this.enableClientCookies=function(){for(var e in this.bMinimalConsentGiven=!0,this.oClientCookiesCache){var t=this.oClientCookiesCache[e];void 0!==t.vendorids?!0===window.jentis.helper._isMinimumOneConsentGivenOfList(t.vendorids)&&(this.setCookie(t),delete this.oClientCookiesCache[e]):(this.setCookie(t),delete this.oClientCookiesCache[e])}},this.disableClientCookies=function(){this.bMinimalConsentGiven=!1},this._isMinimumOneConsentGivenOfList=function(e){for(var t=!1,r=0;r<e.length;r++)if(!0===window.jentis.consent.engine.getVendorConsent(e[r])||"ncm"===window.jentis.consent.engine.getVendorConsent(e[r])){t=!0;break}return t},this.fGetUrlParams=function(){var e="";return(window.onpopstate=function(){var t,r=/\+/g,i=/([^&=]+)=?([^&]*)/g,n=function(e){return window.decodeURIComponent(e.replace(r," "))},a=window.location.search.substring(1);for(e={};t=i.exec(a);)e[n(t[1])]=n(t[2])})(),e},this.cloneObject=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],r=0;r<e.length;r++)t[r]=this.cloneObject(e[r]);return t}if(null!==e&&"object"==typeof e){t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=this.cloneObject(e[i]));return t}return e},this.log=function(e,t){!0===window.jentis.tracker.bLogMode&&(void 0===t?"object"==typeof e?(console.log("%o",e),this.sendLogToMonitor(JSON.stringify(e))):(console.log(e),this.sendLogToMonitor(e)):"object"==typeof t?(console.log(e+": %o",t),this.sendLogToMonitor(e+": "+JSON.stringify(t))):(console.log(e+": "+t),this.sendLogToMonitor(e+": "+t)))},this.logError=function(e,t,r){var i=" - Error Report",n="";void 0!==e&&""!==e&&(i=e+i,n="["+e+"]: "),void 0!==t&&""!==t&&(n+=t),console.group(i),console.log(n),void 0!==r&&console.error(r),this.sendErrorToMonitor(e,t,r)},this.sendLogToMonitor=function(e,t){var r=this._getTemplateJSONForMonitorTag();r.name=e,r.source="frontend",r.type="info",t&&(r._id=t),this._pushTagIntoMonitorCache(r,"")},this.sendFrontendTagToMonitor=function(e,t,r){var i=this._getTemplateJSONForMonitorTag();i._id=e.id,i.tool_id=e.tool_id,i.vendor_id=e.vendor_id,i.source="frontend",i.type="tag",i.trigger=e.trigger,i.http.query_string_parameters=e.placeholders,i.variables.frontend=e.frontendVariables,i.variables.constant=e.constantVariables,i.variables.enrichment=e.enrichmentVariables,i.functions=e.transformationFunctions,this._pushTagIntoMonitorCache(i,t,r)},this.sendErrorToMonitor=function(e,t,r){var i=this._getTemplateJSONForMonitorTag();i.name="",void 0!==t&&""!==t&&(i.name=t,void 0!==e&&""!==e&&(i.name="["+e+"]: "+t)),i.source="frontend",i.type="error",i.error={},void 0!==r&&void 0!==r.message?(i.error.message=r.message,""===i.name&&(i.name=r.message,void 0!==e&&""!==e&&(i.name="["+e+"]: "+r.message))):i.error.message="",void 0!==r&&void 0!==r.stack?i.error.stack=r.stack:i.error.stack="",this._pushTagIntoMonitorCache(i,"")},this._getTemplateJSONForMonitor=function(){return{debugid:window.jentis.config.frontend.debug,consent:window.jentis.consent.engine.getAllConsents(),docs:{},state:"",tags:[]}},this._getTemplateJSONForMonitorTag=function(){return{_id:"",name:"",source:"",type:"",timestamp:Date.now(),trigger:{id:"",executed:!0,conditions:[],excludeTriggers:[]},http:{general:{requestUrl:"",requestMethod:"",requestStatus:200,remoteAddress:""},payload:{},request_headers:{},query_string_parameters:{},response:{status:200,statusText:"",data:"",success:!0,headers:{}}},variables:{frontend:{},backend:{},constant:{},enrichment:{}},functions:{}}},this._pushTagIntoMonitorCache=function(e,t,r){void 0===r&&(r=""),void 0===this._cacheTrackingMonitorRequests[r]&&(this._cacheTrackingMonitorRequests[r]=[]),this._cacheTrackingMonitorRequests[r].push(e),void 0===this._cacheEventIdToStateName[r]&&(this._cacheEventIdToStateName[r]=t)},this._startListeningForTrackingMonitorStreams=function(){if(!0===window.jentis.helper.isSendingToMonitorActive)window.setInterval((function(){var e=[];window.jentis.helper._mergeArrayWithoutDuplicates(e,Object.keys(window.jentis.helper._cacheEventIdToStateName));for(var t=0;t<e.length;t++)if(window.jentis.helper._cacheTrackingMonitorRequests[e[t]].length>0){var r=window.jentis.helper._getTemplateJSONForMonitor();r.tags=window.jentis.helper._cacheTrackingMonitorRequests[e[t]],r.state=window.jentis.helper._cacheEventIdToStateName[e[t]],r.eventDocumentId=e[t],window.jentis.tracker.sendHTTPStream({endpoint:"/monitor",data:JSON.stringify(r),method:"POST",contentType:"application/json",withCredentials:!1}),window.jentis.helper._cacheTrackingMonitorRequests[e[t]]=[],delete window.jentis.helper._cacheEventIdToStateName[e[t]]}}),3e3)},this._mergeArrayWithoutDuplicates=function(e,t){for(var r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r]);return e}},window.jentis.helper.init(),window.jentis=window.jentis||{},window.jentis.consent=window.jentis.consent||{},window.jentis.consent.config={bridge:{consent_model:"opt-in",category_social:"5",category_marketing:"4",category_necessary:"C0001",category_functional:"3",category_statistics:"2"},vendors:{"google_analytics_4_server-side":{consentMode:2,vendorCategory:"statistic"},ga4:{consentMode:2,vendorCategory:"statistic"}}},window.jentis=window.jentis||{},window.jentis.consent=window.jentis.consent||{},window.jentis.consent.engine=new function(){this.init=function(){this.v="2",this.setV2MappingMigration(),this.setFallbackConfiguration(),this.aEventCache={},this.bNewVendorConsent=!1,this.sConsentId=!1,this.bUserConsent=!1,this.iLastUpdate=!1,this.bSend=!1,this.aStorage={},this.vendorsConsentModeFromStorage={},this.aInitStorage={},this.bStartTrack=null,this.consentData={},this.bIframe=window.self!==window.top,this.readStorage(),this.init_eventlistener(),this.init_consentStatus();var e=this.checkifBarShow();this.startJentisTracking(e)},this.setV2MappingMigration=function(){void 0!==window.jentis.consent.v2mapper?this.vendorV2Migration=window.jentis.consent.v2mapper:this.vendorV2Migration={adformDMP:"adformdmp",ga:"googleanalytics",fb:"facebook",partnerizeservertoserver:"partnerize",googleoptimize:"googleopt",cjaffiliate:"cj-affiliate",scrolltracker:"scrolltracker"}},this.setFallbackConfiguration=function(){void 0!==window.jentis.consent.config?(0===Object.keys(window.jentis.consent.config.vendors).length&&(window.jentis.consent.config.vendors={"*":{category:{id:"fallback"},vendor:{id:"*",name:"",street:"",zip:"",country:{iso:"-",name:""}},purpose:{id:"other",name:"Other"},justification:{id:"other",name:"other"},consentMode:1,description:""}}),this.oLocalConfData=window.jentis.consent.config):(console.log("jentis.consent.engine config not found - fallback config"),this.oLocalConfData={timeoutBarShow:-1,backward:{},bModeStartInitTrackOnNoConsentMode:!0,template:{},vendors:{"*":{category:{id:"fallback"},vendor:{id:"*",name:"",street:"",zip:"",country:{iso:"-",name:""}},purpose:{id:"other",name:"Other"},justification:{id:"other",name:"other"},consentMode:1,description:""}}})},this.startJentisTracking=function(e){var t=!1;for(var r in this.oLocalConfData.vendors){var i=this.oLocalConfData.vendors[r];if(0===i.consentMode||2===i.consentMode){if(void 0!==this.sConsentId&&!1!==this.sConsentId&&!1===e&&(!0===this.aStorage[r]||"ncm"===this.aStorage[r])){t=!0;break}}else if(1===i.consentMode){t=!0;break}}!0===t&&!0!==this.bStartTrack?window.jentis.helper.setEvent("jentis.consent.engine","minimal-consent-given"):!1===t&&!1!==this.bStartTrack&&window.jentis.helper.setEvent("jentis.consent.engine","no-consent-given"),this.bStartTrack=t},this.init_consentStatus=function(){if(!1===this.sConsentId)var e={};else e=this.aStorage;this.bNewVendorConsent=!1,this.bWriteStorage=!1;var t=!1;for(var r in this.oLocalConfData.vendors){var i=this.oLocalConfData.vendors[r];void 0===e[r]?(0===i.consentMode||2===i.consentMode?this.bNewVendorConsent=!0:1===i.consentMode&&(e[r]=!0,t=!0),this.bWriteStorage=!0):void 0!==this.vendorsConsentModeFromStorage[r]?this.vendorsConsentModeFromStorage[r]!==i.consentMode&&(0===i.consentMode||2===i.consentMode?this.bNewVendorConsent=!0:1===i.consentMode&&(e[r]=!0,t=!0),this.bWriteStorage=!0):1===i.consentMode&&(e[r]=!0,t=!0,this.bWriteStorage=!0)}Object.keys(e).length>1&&void 0!==e["*"]&&(delete e["*"],this.bWriteStorage=!0),this.aInitStorage=this.copyObject(e);var n=!1,a=!1;!1===this.bSend&&!1!==this.sConsentId&&(n=!0,a=!0),!1===this.bSend&&!0===t&&!0===this.oLocalConfData.bModeStartInitTrackOnNoConsentMode&&(n=!0,a=!1),!0===this.bSend&&!1!==this.sConsentId&&!0===this.bNewVendorConsent&&(n=!0,a=!0),this.bWriteStorage?this.writeStorage(e,n,!0,!1,a):n&&this.writeStorage(e,n,!1,!1,a),window.jentis.helper.setEvent("jentis.consent.engine","init")},this.checkifBarShow=function(){return(0===Object.keys(this.aStorage).length||!1===this.sConsentId||!1===this.bUserConsent||!0===this.bNewVendorConsent||!1===this.iLastUpdate||void 0!==this.oLocalConfData.timeoutBarShow&&!1!==this.oLocalConfData.timeoutBarShow&&this.iLastUpdate+this.oLocalConfData.timeoutBarShow<Date.now())&&(window.jentis.helper.setEvent("jentis.consent.engine","show-bar"),!0)},this.readStorage=function(){var e=null,t=window.jentis.helper.readCookie("jts_cmp");if(!0===window.jentis.helper.bIsLocalStorageAvailable?null!==t?(e=JSON.parse(t),window.jentis.helper.setCookie({name:"jts_cmp",value:"",exdays:-1,sameSite:"Strict"})):e=window.jentis.helper.getLocalStorageItem("jentis.consent.data"):null!==t&&(e=JSON.parse(t)),null===e){for(var r in this.sConsentId=!1,this.iLastUpdate=!1,this.bSend=!1,this.aStorage={},this.oLocalConfData.vendors){1===this.oLocalConfData.vendors[r].consentMode?this.aStorage[r]=!0:this.aStorage[r]=!1}this.aInitStorage={}}else{if(this.sConsentId=e.consentid,this.iLastUpdate=e.lastupdate,this.aStorage=e.vendors,this.bUserConsent=e.userconsent,this.consentData=e.data,void 0!==e.vendorsJustification)for(var i in e.vendorsJustification)void 0!==e.vendorsJustification[i]&&"consent"!==e.vendorsJustification[i]?this.vendorsConsentModeFromStorage[i]=1:this.vendorsConsentModeFromStorage[i]=-1;void 0!==e.vendorsConsentMode&&(this.vendorsConsentModeFromStorage=e.vendorsConsentMode),void 0===this.aStorage&&void 0!==this.oLocalConfData.backward&&void 0!==this.oLocalConfData.backward.vendorduplicate&&(this.aStorage=e[this.oLocalConfData.backward.vendorduplicate]);var n=!1;for(var a in this.aStorage){var o=this.vendorV2Migration[a];void 0!==o&&(this.aStorage[o]=this.aStorage[a],delete this.aStorage[a],n=!0)}n&&(e.vendors=this.aStorage,void 0===this.aStorage&&void 0!==this.oLocalConfData.backward&&void 0!==this.oLocalConfData.backward.vendorduplicate&&(e[this.oLocalConfData.backward.vendorduplicate]=this.aStorage),this.store2LocalStorage(e)),this.aInitStorage=this.copyObject(e.vendors),void 0!==e.send?this.bSend=e.send:this.bSend=!1}},this.getTemplateConfig=function(){return void 0!==this.oLocalConfData&&this.oLocalConfData},this.getVendorConsent=function(e){return this.aStorage[e]},this.getAllConsents=function(){return this.aStorage},this.getConsentId=function(){return this.sConsentId},this.getVendorFullData=function(){var e={};for(var t in this.oLocalConfData.vendors)e[t]=this.oLocalConfData.vendors[t],e[t].status=this.aStorage[t];return e},this.getLastUpdateTime=function(){return this.iLastUpdate},this.setNewVendorConsentsIgnoreConsentMode=function(e){this.setNewVendorConsents(e,!0)},this.setNewVendorConsents=function(e,t){for(var r in void 0===t&&(t=!1),e)this.aStorage[r]=e[r],t||(!1===this.aStorage[r]&&void 0!==this.oLocalConfData.vendors[r]&&void 0!==this.oLocalConfData.vendors[r].consentMode&&2===this.oLocalConfData.vendors[r].consentMode&&(this.aStorage[r]="ncm"),!0!==this.aStorage[r]&&void 0!==this.oLocalConfData.vendors[r]&&void 0!==this.oLocalConfData.vendors[r].consentMode&&1===this.oLocalConfData.vendors[r].consentMode&&(this.aStorage[r]=!0));return this.writeStorage(this.aStorage,!0)},this.OptOut=function(){var e={};for(var t in this.oLocalConfData.vendors)e[t]=!1;return this.writeStorage(e,!0)},this.DenyAll=function(){var e={};for(var t in this.oLocalConfData.vendors){var r=this.oLocalConfData.vendors[t];0===r.consentMode?e[t]=!1:2===r.consentMode?e[t]="ncm":1===r.consentMode&&(e[t]=!0)}return this.writeStorage(e,!0)},this.AcceptAll=function(){var e={};for(var t in this.oLocalConfData.vendors)e[t]=!0;return this.writeStorage(e,!0)},this.userShowSettings=function(){window.jentis.helper.setEvent("jentis.consent.engine","user-show-settings")},this.addEventListener=function(e,t){window.jentis.helper.addEventListener(e,t)},this.init_eventlistener=function(){var e;e=this,document.addEventListener("jentis.consent.engine.setNewVendorConsents",(function(t){e.setNewVendorConsents(t.details.vendors),window.jentis.helper.setEvent("jentis.consent.engine","external-NewVendorData")}),!1),function(e){document.addEventListener("jentis.consent.engine.DenyAll",(function(t){e.alldeny(),window.jentis.helper.setEvent("jentis.consent.engine","external-DenyAll")}),!1)}(this),function(e){document.addEventListener("jentis.consent.engine.AcceptAll",(function(t){e.allagree(),window.jentis.helper.setEvent("jentis.consent.engine","external-AcceptAll")}),!1)}(this)},this.checkStorageChange=function(e){var t=[],r={},i=!1,n=!1;for(var a in e)(void 0===this.aInitStorage[a]||!1===this.aInitStorage[a])&&!0===e[a]||void 0!==this.aInitStorage[a]&&"ncm"===this.aInitStorage[a]&&!0===e[a]||(void 0===this.aInitStorage[a]||!1===this.aInitStorage[a])&&"ncm"===e[a]?(t.push(a),r[a]=e[a],i=!0,n=!0):(void 0!==this.aInitStorage[a]&&!0===this.aInitStorage[a]&&!1===e[a]||void 0!==this.aInitStorage[a]&&!0===this.aInitStorage[a]&&"ncm"===e[a]||void 0!==this.aInitStorage[a]&&"ncm"===this.aInitStorage[a]&&!1===e[a])&&(i=!0,r[a]=e[a],n=!0);return t.length>0&&window.jentis.helper.setEvent("jentis.consent.engine","vendor-add",t),!0===i&&window.jentis.helper.setEvent("jentis.consent.engine","vendor-change",e),this.aInitStorage=this.copyObject(e),[r,n]},this.writeStorage=function(e,t,r,i,n){void 0===n&&(n=!0),this.bUserConsent=n,!1===this.sConsentId&&!0===t&&(this.sConsentId=this.uuidv4()),void 0===t&&(t=!0),void 0===i&&(i=!0),void 0!==r&&!0!==r||(this.iLastUpdate=Date.now());var a={consentid:this.sConsentId,lastupdate:this.iLastUpdate,vendors:e,vendorsConsentMode:this.getConsentModePerVendor(),send:t,userconsent:n,data:this.consentData};void 0!==this.oLocalConfData.backward&&void 0!==this.oLocalConfData.backward.vendorduplicate&&(a[this.oLocalConfData.backward.vendorduplicate]=e),this.store2LocalStorage(a),this.aStorage=e;var o=this.checkStorageChange(e),s=o[0],c=o[1];return a.vendorsChanged=s,!0!==t||!0!==c&&!1!==this.bSend||(window.jentis.helper.setEvent("jentis.consent.engine","send-consent-data",a),this.bSend=!0),!0===i&&this.startJentisTracking(!1),this.sConsentId},this.store2LocalStorage=function(e){!0===window.jentis.helper.bIsLocalStorageAvailable?window.jentis.helper.setLocalStorageItem("jentis.consent.data",e):window.jentis.helper.setCookie({name:"jts_cmp",value:JSON.stringify(e),exdays:365,sameSite:"Strict"})},this.getConsentModePerVendor=function(){var e={};for(vendor in this.oLocalConfData.vendors)void 0!==this.oLocalConfData.vendors[vendor].consentMode&&null!==this.oLocalConfData.vendors[vendor].consentMode&&(e[vendor]=this.oLocalConfData.vendors[vendor].consentMode);return e},this.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},this.copyObject=function(e){var t={};for(var r in e)t[r]=e[r];return t},this.setConsentData=function(e){void 0!==e&&"[object Object]"===Object.prototype.toString.call(e)?this.consentData=e:window.jentis.helper.logError("J-Consent Engine","setConsentData > Passed Parameter is not a JSON!")},this.getConsentData=function(){return this.consentData},this.addEventListener=function(e,t){window.jentis.helper.addEventListener(e,t)}},window.jentis.consent.engine.init(),window.jentis=window.jentis||{},window.jentis.vendor=window.jentis.vendor||{},window.jentis.vendor.cmp_bridge_onetrust_vendors={},window.jentis.vendor.cmp_bridge_onetrust=new function(){this.init=function(){this.consentEngineReady=!1,this.onetrustReady=!1,this.oneTrustGroups={},this.oneTrustConfig=!1,this.oneTrustInterval=!1,this.templateConfig=window.jentis.consent.engine.getTemplateConfig(),this.bridgeConfig=this.templateConfig.bridge,this.vendorConfig=this.templateConfig.vendors,this.oneTrustConsentModel=this.bridgeConfig.consent_model,this.listenConsentEngine(),this.listenOnetrust(),this.listenConsent(),this.listenConsentEngineShowAgain()},this.listenConsentEngine=function(){var e=window.document;void 0!==window.jentis&&void 0!==window.jentis.consent&&void 0!==window.jentis.consent.engine&&(e=window.jentis.consent.engine),function(e,t){t.addEventListener("jentis.consent.engine.init",(function(t){e.consentEngineReady=!0,e.startTracking()}))}(this,e)},this.listenOnetrust=function(){var e;e=this,window.addEventListener("consent.onetrust",(function(t){e.addServicesToTracker()}),!1)},this.listenConsent=function(){var e;e=this,void 0!==window.OnetrustActiveGroups?e.addServicesToTracker():setTimeout((function(){e.listenConsent()}),500)},this.addServicesToTracker=function(){this.oneTrustGroups=window.OnetrustActiveGroups,this.onetrustReady=!0,this.startTracking()},this.listenConsentEngineShowAgain=function(){!function(e,t){t.addEventListener("jentis.consent.engine.show-bar",(function(t){e.startTracking()}))}(this,void 0!==window.jentis&&void 0!==window.jentis.consent&&void 0!==window.jentis.consent.engine?window.jentis.consent.engine:document)},this.getVendorValue=function(e,t,r){return void 0!==e[t]&&void 0!==e[t][r]?e[t][r]:e.NOTCONFIGUREDVENDOR[r]},this.startTracking=function(){if(this.consentEngineReady&&this.onetrustReady){if("opt-in"===this.oneTrustConsentModel&&null===window.jentis.helper.readCookie("OptanonAlertBoxClosed"))return!1;var e=window.jentis.consent.engine.getVendorFullData(),t={},r=this.oneTrustGroups.split(",");for(var i in e){var n=e[i],a=this.getVendorValue(this.vendorConfig,i,"vendorCategory");if(0===n.consentMode||2===n.consentMode){var o=!1;if("opt-out"===this.oneTrustConsentModel&&null===window.jentis.helper.readCookie("OptanonAlertBoxClosed"))o=!0;else{if("necessary"===a){var s="C0001";void 0!==this.bridgeConfig.category_necessary&&""!==this.bridgeConfig.category_necessary&&(s=this.bridgeConfig.category_necessary),o=r.indexOf(s)>-1}if("statistic"===a){s="C0002";void 0!==this.bridgeConfig.category_statistics&&""!==this.bridgeConfig.category_statistics&&(s=this.bridgeConfig.category_statistics),o=r.indexOf(s)>-1}if("functional"===a){s="C0003";void 0!==this.bridgeConfig.category_functional&&""!==this.bridgeConfig.category_functional&&(s=this.bridgeConfig.category_functional),o=r.indexOf(s)>-1}if("marketing"===a){s="C0004";void 0!==this.bridgeConfig.category_marketing&&""!==this.bridgeConfig.category_marketing&&(s=this.bridgeConfig.category_marketing),o=r.indexOf(s)>-1}if("social"===a){s="C0005";void 0!==this.bridgeConfig.category_social&&""!==this.bridgeConfig.category_social&&(s=this.bridgeConfig.category_social),o=r.indexOf(s)>-1}}t[i]=o}}Object.keys(t).length>0&&jentis.consent.engine.setNewVendorConsents(t)}},this.init()},window.jentis.tracker=new function(){this.sStoragePrefix="jentis_raw_controller_documentids",this.sPreviewStorageKey="jts_preview_version",this.sAutomationIdKey="jts_automation_id",this.sPreviewVersion=!1,this.sAutomationId=!1,this.oCache={},this.jtsEventCache=[],this.jtsFrontendTagCache=[],this.jtsFrontendTriggerCache=[],this.jtsFrontendScopeOfTheStateCache={},this.trackingConsentGiven=!1,this.oConsentListenerEngine=document,this.jtm={},this.jtm.state={},this.jtm.frontendLib={},this.hybridTracking={},this.hybridTracking.enabled=!1,this.datareceiver={},this.private={},this.datareceiver.sendHTTPStream=function(e){try{if(void 0===e.client_request_type||void 0!==e.client_request_type&&"iframe"===e.client_request_type){var t=window.document.createElement("iframe");t.height="0",t.width="0",t.style.display="none",t.style.visibility="hidden";var r=window.document.body&&window.document.body.lastChild||window.document.body||window.document.head;r.parentNode.insertBefore(t,r),t.src=e.stream}else if(void 0!==e.client_request_type&&"image"===e.client_request_type){(new Image).src=e.stream}}catch(e){window.jentis.tracker.log("J-DCP","[datareceiver.sendHTTPStream] [WARNING] datareceiver.sendHTTPStream - Error")}},this.pageChangeInit=function(){window.jentis.tracker.jtsFrontendTagCache=[],window.jentis.tracker.jtsFrontendTriggerCache=[],window.jentis.tracker.jtsEventCache=[]},this.init=function(){this.setUserCustomizationVariables(),this.createJentisTrackerNamespace(),this.registerOnPageChangeEventsForPageInitializationTasks(),this.checkLogMode(),this.checkDebug(),this.checkAutomationId(),!0===this.checkPreview()&&(this.initRawdata(),this.triggerJSEventForPropagatingUserID(),this.loadCSSFileIfNecessary(),this.listenOnJSEventsFromCMP(),this.createListenerForPushCommands(),this.executePlugins(),this.createListenerForTriggersRelatedToJSEvents(),this.createListenerForStates(),window.jentis.helper.setEvent("jentis.tracker","init"))},this.setUserCustomizationVariables=function(){this.userCustomizable={},this.userCustomizable.reprocessCacheReset=!0,void 0!==window.jentis.userCustomizable&&void 0!==window.jentis.userCustomizable.reprocessCacheReset&&(this.userCustomizable.reprocessCacheReset=window.jentis.userCustomizable.reprocessCacheReset)},this.setUserCustomization=function(e,t){"reprocessCacheReset"===e&&(this.userCustomizable.reprocessCacheReset=t)},this.createJentisTrackerNamespace=function(){window._jts=window._jts||[],window._jts.opush=window._jts.push,window.jentis.state=window.jentis.state||{},window.jentis.state.jentisdatalayersend=[],window.jentis.tracker.tracks=window.jentis.state.jentisdatalayersend},this.registerOnPageChangeEventsForPageInitializationTasks=function(){try{var e=history.pushState;history.pushState=function(){e.apply(history,arguments),window.jentis.tracker.pageChangeInit()}}catch(e){window.jentis.tracker.log("J-DCP","[WARNING] pushState not working in this browser!")}try{var t=history.replaceState;history.replaceState=function(){t.apply(history,arguments),window.jentis.tracker.pageChangeInit()}}catch(e){window.jentis.tracker.log("J-DCP","[WARNING] replaceState not working in this browser!")}window.addEventListener("popstate",(function(e){e.state?void 0!==e.target&&void 0!==e.target.document&&void 0!==e.target.document.location&&void 0!==e.target.document.location.pathname&&window.jentis.tracker.pageChangeInit():null===e.state&&window.jentis.tracker.pageChangeInit()}),!1)},this.triggerJSEventForPropagatingUserID=function(){var e=this.readDocumentID("user");null!==e&&window.jentis.helper.setEvent("jentis.tracker","jentis-userid",e)},this.createListenerForPushCommands=function(){if(!0===window.jentis.tracker.bLogMode&&"object"==typeof window._jts)for(var e=0;e<window._jts.length;e++)window.jentis.tracker.log("J-DCP : [JENTIS DL] - [AD01] Received _jts.push() - Command: "+window._jts[e].track+" | Tracking "+(!0===window.jentis.config.trackingConsentGiven?"allowed":"NOT allowed"),window._jts[e],!1,"AD01");window._jts.push=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];window.jentis.tracker.log("J-DCP : [JENTIS DL] - [AD01] Received _jts.push() - Command: "+t.track+" | Tracking "+(!0===window.jentis.config.trackingConsentGiven?"allowed":"NOT allowed"),t,!1,"AD01"),window._jts.opush(t)}}},this.createListenerForTriggersRelatedToJSEvents=function(){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",window.jentis.tracker.startSelectorTracking):window.jentis.tracker.startSelectorTracking()},this.createListenerForStates=function(){for(var e in window.jentis.config.jtm.states)!function(e){window.jentis.config.jtm.states[e]((function(){for(var t,r={},i="XMLHttpRequest",n=0;n<arguments.length;n++)"object"==typeof arguments[n]?window.jentis.tracker.isCorrectStateObjectFormat(arguments[n])?(void 0!==arguments[n].stateCallback&&(t=arguments[n].stateCallback),void 0!==arguments[n].contextualStateInformation&&(r=arguments[n].contextualStateInformation),void 0!==arguments[n].requestType&&(i=arguments[n].requestType)):0===Object.keys(r).length&&(r=arguments[n]):"function"==typeof arguments[n]&&(t=arguments[n]);window.jentis.tracker.executeState(e,window,r,i),"function"==typeof t&&t()}))}(e)},this.isCorrectStateObjectFormat=function(e){var t=!1;return Object.keys(e).length>0&&(void 0===e.stateCallback&&void 0===e.contextualStateInformation&&void 0===e.requestType||(t=!0)),t},this.loadCSSFileIfNecessary=function(){if(void 0!==window.jentis.config&&void 0!==window.jentis.config.loadcss&&void 0!==window.jentis.config.frontend.cdnhost&&!0===window.jentis.config.loadcss){var e=document.createElement("link");e.rel="stylesheet",e.id="jentis-styles",e.href=window.jentis.config.frontend.cdnhost+window.jentis.config.filehash+".css",e.type="text/css",e.media="all",document.getElementsByTagName("head")[0].appendChild(e)}},this.listenOnJSEventsFromCMP=function(){var e;void 0!==window.jentis.helper&&void 0!==window.jentis.consent.engine&&(this.oConsentListenerEngine=window.jentis.consent.engine),(e=this).oConsentListenerEngine.addEventListener("jentis.consent.engine.init",(function(){if(void 0!==window.jentis.consent.engine.getVendorFullData()["*"])window.jentis.tracker.log("J-DCP","[CONSENT] - [AC02] No CMP connection is defined and Consent Engine deactivated by user",!1,"AC02");else{var e="";void 0!==window.jentis.consent.config.bridge_name&&(e=window.jentis.consent.config.bridge_name),window.jentis.tracker.log("J-DCP","[CONSENT] - [AC01] CMP connection is defined, awaiting information: "+e,!1,"AC01")}})),e.oConsentListenerEngine.addEventListener("jentis.consent.engine.no-consent-given",(function(){window.jentis.tracker.log("J-DCP","[CONSENT] - User declined consent"),window.jentis.helper.disableClientCookies(),e.denyTracking()})),e.oConsentListenerEngine.addEventListener("jentis.consent.engine.send-consent-data",(function(e){if(window.jentis.tracker.log("J-DCP : [CONSENT] - [AC04] Consent information received based on new or updated decision of user: ",window.jentis.consent.engine.getAllConsents(),!1,"AC04"),null!==e.detail){var t={track:"consent"};for(var r in e.detail)t[r]=e.detail[r];var i=void 0;if(void 0!==e.detail&&void 0!==e.detail.vendorsChanged&&Object.keys(e.detail.vendorsChanged).length>0)for(var n in i={},e.detail.vendors)void 0!==e.detail.vendorsChanged[n]&&!0===e.detail.vendorsChanged[n]?i[n]=!0:i[n]=!1;window.jentis.tracker.trackConsent(t),!0===window.jentis.config.trackingConsentGiven&&void 0!==i&&(window.jentis.helper.enableClientCookies(),window.jentis.tracker.trackCachedEvents(i),window.jentis.tracker.trackCachedFrontend())}})),e.oConsentListenerEngine.addEventListener("jentis.consent.engine.minimal-consent-given",(function(){window.jentis.tracker.log("J-DCP : [CONSENT] - [AC03] Consent information received - data from storage used:",window.jentis.consent.engine.getAllConsents(),!1,"AC03"),window.jentis.helper.enableClientCookies(),e.startTracking()}))},this.executeState=function(e,t,r,i){window.jentis.tracker.log("J-DCP","[STATE] - [AS01] State executed: "+e,!1,"AS01");var n=window.jentis.tracker.createScopeOfTheStateObject(e,t,r,i);window.jentis.tracker.trackSynchronCase(n),window.jentis.tracker.buildEnrichmentJSONFromVariables(n.cacheForEnrichmentScope.enrichmentVariables,n),window.jentis.tracker.startAsynchronousHTTPVariableEvaluation({scopeOfTheState:n,variablesSortedByTrigger:n._cacheForHTTPVariables.httpVariables,callback:function(e){window.jentis.tracker.evaluateDependendVariables(window.jentis.tracker.private.getArrayOfAllBlockedDependencies(n,!0),n,!0,e,(function(e){if(!0===window.jentis.config.trackingConsentGiven)for(var t in e.triggerVariableExecutedForBackend)if(window.jentis.tracker.resolveTriggerVariablesForBackend({triggerName:t,scopeOfTheState:n,variables:e.triggerVariableExecutedForBackend[t],cacheEnrichmentVariables:!0}),n.trigger[t].dependencies.length>0){var r=n.trigger[t];if(n.trigger[t]=window.jentis.tracker.allTriggerConditionsFulfilled({scopeOfTheState:n,overwriteTrigger:r.trigger,triggerName:t,cacheEnrichmentVariables:!0}),!0===n.trigger[t].backendFulfilled){var i=window.jentis.tracker.collectVariablesFromTriggerIncludingExcludeTriggers(t);i.length>0&&(window.jentis.tracker.resolveTriggerVariablesForBackend({triggerName:t,scopeOfTheState:n,variables:i,cacheEnrichmentVariables:!0}),window.jentis.tracker.log("J-DCP","[STATE] [TRIGGER] - [AS02] Trigger executed: "+t+" in scope Server-Side",!1,"AS02"),n.bIsThereDataToSendToBackend=!0)}}window.jentis.tracker.startAsynchronousHTTPVariableEvaluation({scopeOfTheState:n,variablesSortedByTrigger:n._cacheForHTTPVariables.httpVariables,callback:function(e){window.jentis.tracker.evaluateDependendVariables(window.jentis.tracker.private.getArrayOfAllBlockedDependencies(n,!0),n,!0,e,(function(e){(!0===n.bIsThereDataToSendToBackend||window.jentis.tracker.getPreviewVersion())&&(n.httpvarsSortedPerTrigger=e.triggerVariableCacheForBackend,window.jentis.tracker.sendDocumentsToJENTIS({scopeOfTheState:n})),window.jentis.tracker.trackAsyncCase(n,"async-variables",n._cacheForHTTPVariables),n.cacheForEnrichmentScope.enrichmentVariables.length>0&&function(t){window.jentis.tracker.log("J-DCP","[ENRICHMENT][FRONTEND] Started for: "+t.cacheForEnrichmentScope.enrichmentVariables),window.jentis.tracker.getEnrichmentOfVariables(t,(function(r){if(void 0!==r&&"string"==typeof r.response){try{var i=JSON.parse(r.response);window.jentis.tracker.log("J-DCP : [ENRICHMENT][FRONTEND] Received: ",i)}catch(e){window.jentis.tracker.log("J-DCP","[ENRICHMENT][FRONTEND] Error: "+r.response)}void 0!==i&&(window.jentis.tracker.mergeEnrichedVariablesToScope(t,i),window.jentis.tracker.evaluateDependendVariables(window.jentis.tracker.private.getArrayOfAllBlockedDependencies(t,!1),t,!1,e,(function(){window.jentis.tracker.trackAsyncCase(t,"enrichment-variables",t.cacheForEnrichmentScope)})))}}))}(n)}))}})}))}})},this.private.getArrayOfAllBlockedDependencies=function(e,t){var r=[];for(var i in e.blockedVariablesDueToReferenceMissing)for(var n=0;n<e.blockedVariablesDueToReferenceMissing[i].dependencies.length;n++)void 0!==t&&!0===t?!1===window.jentis.tracker.isVariableOfTypeEnrichment(e.blockedVariablesDueToReferenceMissing[i].dependencies[n])&&window.jentis.tracker.mergeArrayWithoutDuplicates(r,[e.blockedVariablesDueToReferenceMissing[i].dependencies[n]]):window.jentis.tracker.mergeArrayWithoutDuplicates(r,[e.blockedVariablesDueToReferenceMissing[i].dependencies[n]]);return r},this.evaluateDependendVariables=function(e,t,r,i,n){var a=i;e.length>0?window.jentis.tracker.evaluateDependendVariable({scopeOfTheState:t,blockedVariableName:e[0],cacheEnrichmentVariables:r,masterKeys:e,masterIndex:0,masterCallback:n,xReturnObject:a,callback:window.jentis.tracker.private.callback_evaluateDependendVariable,endlessLoopChain:[]}):n(a)},this.private.callback_evaluateDependendVariable=function(e){var t=e.scopeOfTheState,r=e.masterIndex,i=e.masterKeys,n=e.masterCallback,a=e.cacheEnrichmentVariables,o=e.xReturnObject,s=e.endlessLoopChain;++r===i.length?n(o):window.jentis.tracker.evaluateDependendVariable({scopeOfTheState:t,blockedVariableName:i[r],cacheEnrichmentVariables:a,masterKeys:i,masterIndex:r,masterCallback:n,xReturnObject:o,callback:window.jentis.tracker.private.callback_evaluateDependendVariable,endlessLoopChain:s})},this.evaluateDependendVariable=function(e){var t=e.scopeOfTheState,r=e.blockedVariableName,i=e.cacheEnrichmentVariables,n=e.masterKeys,a=e.masterIndex,o=e.masterCallback,s=e.callback,c=e.xReturnObject,d=e.endlessLoopChain,g=[];void 0!==t.blockedVariablesDueToReferenceMissing[r]&&void 0!==t.blockedVariablesDueToReferenceMissing[r].dependencies&&(g=t.blockedVariablesDueToReferenceMissing[r].dependencies);for(var l=!0,_=0;_<g.length;_++){var u=g[_];!0!==i||!0!==window.jentis.tracker.isVariableOfTypeEnrichment(u)?void 0!==t.blockedVariablesDueToReferenceMissing[u]&&t.blockedVariablesDueToReferenceMissing[u].dependencies.length>0?l=!1:void 0!==t._variables[u]?(t.blockedVariablesDueToReferenceMissing[r].dependencies.splice(_,1),_-=1):l=!1:l=!1}if(!0===l){var h=n.indexOf(r);n.splice(h,1),h<=a&&(a-=1),d.indexOf(r)>-1?s({scopeOfTheState:t,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,xReturnObject:c,endlessLoopChain:d}):d.push(r);var p=[];if(void 0!==t.blockedVariablesDueToReferenceMissing[r]&&void 0!==t.blockedVariablesDueToReferenceMissing[r].triggers&&(p=t.blockedVariablesDueToReferenceMissing[r].triggers),p.length>0)if(!0===window.jentis.tracker.isVariableTriggerRelated(r)){for(;0<p.length;trigger++){var m=window.jentis.tracker.getValueOfVariable({variableName:r,triggerName:p[0].triggerName,scopeOfTheState:t});window.jentis.tracker.log("J-DCP : [DEPENDENCY-CHECKER][EVALUATE] Variable: "+r+" | Value: "+m+" | Trigger: "+p[0].triggerName)}s({scopeOfTheState:t,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,xReturnObject:c,endlessLoopChain:d})}else{var v=p[0].triggerName;if(void 0!==t._cacheForHTTPVariables.httpVariables[p[0].triggerName]&&t._cacheForHTTPVariables.httpVariables[p[0].triggerName].indexOf(r)>-1){var w={};w[v]=[r],window.jentis.tracker.startAsynchronousHTTPVariableEvaluation({scopeOfTheState:t,variablesSortedByTrigger:w,callback:function(e){window.jentis.tracker.mergeJsonWithOnePropertyArray(c.triggerVariableCacheForBackend,e.triggerVariableCacheForBackend),window.jentis.tracker.mergeJsonWithOnePropertyArray(c.triggerVariableExecutedForBackend,e.triggerVariableExecutedForBackend),!1!==e.consent?window.jentis.tracker.private.callback_afterDependendVariableEvaluated({variableName:r,scopeOfTheState:t,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,callback:s,xReturnObject:c,endlessLoopChain:d}):s({scopeOfTheState:t,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,xReturnObject:c,endlessLoopChain:d})}})}else{m=window.jentis.tracker.getValueOfVariable({variableName:r,triggerName:p[0].triggerName,scopeOfTheState:t});window.jentis.tracker.private.callback_afterDependendVariableEvaluated({variableName:r,scopeOfTheState:t,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,callback:s,xReturnObject:c,endlessLoopChain:d})}}else window.jentis.tracker.isConsentGivenForVariable(r)?window.jentis.tracker.private.callback_afterDependendVariableEvaluated({variableName:r,scopeOfTheState:t,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,callback:s,xReturnObject:c,endlessLoopChain:d}):s({scopeOfTheState:t,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,xReturnObject:c,endlessLoopChain:d})}else s({scopeOfTheState:t,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,xReturnObject:c,endlessLoopChain:d})},this.mergeJsonWithOnePropertyArray=function(e,t){this.mergeJsonWithOnePropertyArray=function(e,t){if(void 0===e)e=t;else for(var r in t)void 0===e[r]&&(e[r]=[]),window.jentis.tracker.mergeArrayWithoutDuplicates(e[r],t[r])}},this.private.callback_afterDependendVariableEvaluated=function(e){var t=e.variableName,r=e.scopeOfTheState,i=e.cacheEnrichmentVariables,n=e.masterKeys,a=e.masterIndex,o=e.masterCallback,s=e.callback,c=e.xReturnObject,d=e.endlessLoopChain;if(window.jentis.tracker.log("J-DCP : [DEPENDENCY-CHECKER][EVALUATE] Variable: "+t+" | Value: "+r._variables[t]),void 0!==r._cacheForHTTPVariables.referenceCache[t]){var g=[];for(var l in r._cacheForHTTPVariables.referenceCache[t])g.push(l);window.jentis.tracker.evaluateDependendVariables(g,r,i,{triggerVariableExecutedForBackend:{},triggerVariableCacheForBackend:{}},(function(){delete r._cacheForHTTPVariables.referenceCache[t],s({scopeOfTheState:r,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,xReturnObject:c,endlessLoopChain:d})}))}else s({scopeOfTheState:r,cacheEnrichmentVariables:i,masterKeys:n,masterIndex:a,masterCallback:o,xReturnObject:c,endlessLoopChain:d})},this.createScopeOfTheStateObject=function(e,t,r,i){var n={};return n.stateEventID=this.createDocumentID("event"),n.primaryKey=window.jentis.tracker.getNewTrackId(),n.bIsThereDataToSendToBackend=!1,n.bIsThereAFrontendTriggerBecauseOfConsentMissing=!1,n.timestamp=Date.now(),n.state=e,n.element=t,n.contextualStateInformation=r,n.requestType=i,n.oVars={USER:{},SESSION:{},EVENT:{},CONSENT:{}},n._variables={},n._cacheForHTTPVariables={tags:{},backend:{},httpVariables:{},triggers:{},referenceCache:{}},n.cacheForEnrichmentScope={triggers:{},tags:{},enrichmentVariables:[],referenceCache:{}},n.trigger={},n.tagsWaitingBecauseOfExcludeTrigger={},n.triggerWaitingForConsent=[],n.blockedVariablesDueToReferenceMissing={},n},this.mergeEnrichedVariablesToScope=function(e,t){for(var r in t)for(var i in t[r])e._variables[i]=t[r][i]},this.trackSynchronCase=function(e){for(var t in window.jentis.config.jtm.trigger)if(window.jentis.config.jtm.trigger[t].state===e.state||void 0===window.jentis.config.jtm.trigger[t].state&&t===e.state){if(e.trigger[t]=window.jentis.tracker.allTriggerConditionsFulfilled({scopeOfTheState:e,triggerName:t,cacheEnrichmentVariables:!0,cacheHTTPVariables:!0}),e.trigger[t].dependencies.length>0&&(window.jentis.tracker.resolveTriggerVariablesForBackend({triggerName:t,scopeOfTheState:e,variables:e.trigger[t].dependencies,cacheEnrichmentVariables:!0}),window.jentis.tracker.log("J-DCP","[STATE] [TRIGGER] - [AS02] Trigger executed: "+t+" in scope Server-Side, because of dependency",!1,"AS02")),!0===e.trigger[t].backendFulfilled){var r=window.jentis.tracker.collectVariablesFromTriggerIncludingExcludeTriggers(t);r.length>0&&(window.jentis.tracker.resolveTriggerVariablesForBackend({triggerName:t,scopeOfTheState:e,variables:r,cacheEnrichmentVariables:!0}),window.jentis.tracker.log("J-DCP","[STATE] [TRIGGER] - [AS02] Trigger executed: "+t+" in scope Server-Side",!1,"AS02"),e.bIsThereDataToSendToBackend=!0)}if(void 0!==window.jentis.config.jtm.trigger[t].tags&&window.jentis.config.jtm.trigger[t].tags.length>0||void 0!==window.jentis.config.jtm.trigger[t].codeblocks&&window.jentis.config.jtm.trigger[t].codeblocks.length>0)if(!0===e.trigger[t].frontendFulfilled||!1===e.trigger[t].frontendFulfilled&&(e.trigger[t].dependencies.length>0||e.trigger[t].enrichmentVariables.length>0||e.trigger[t].httpVariables.length>0))!1===e.trigger[t].frontendFulfilled&&e.trigger[t].enrichmentVariables.length>0&&(window.jentis.tracker.mergeArrayWithoutDuplicates(e.cacheForEnrichmentScope.enrichmentVariables,e.trigger[t].enrichmentVariables),e.cacheForEnrichmentScope.triggers[t]=e.trigger[t].trigger),!1===e.trigger[t].frontendFulfilled&&(e.trigger[t].dependencies.length>0||e.trigger[t].httpVariables.length>0)&&(e._cacheForHTTPVariables.triggers[t]=e.trigger[t].trigger),!0===e.trigger[t].frontendFulfilled&&(e.trigger[t].dependencies.length>0||0===e.trigger[t].trigger.excludeTrigger.length)&&(window.jentis.tracker.log("J-DCP","[STATE] [TRIGGER] - [AS02] Trigger executed: "+t+" in scope Client-Side",!1,"AS02"),window.jentis.tracker.executeCodeblocks(e.trigger[t].trigger)),window.jentis.tracker.checkAndResolveFrontendTagsForScope({scopeOfTheState:e,triggerName:t,cacheHTTPVariables:!0,cacheEnrichmentVariables:!0});else for(var i=0;i<e.trigger[t].trigger.tags.length;i++)window.jentis.tracker.sendNotExecutedTagToMonitor({scopeOfTheState:e,frontendTag:window.jentis.tracker.cloneObject(window.jentis.config.jtm.frontendTags[e.trigger[t].trigger.tags[i]]),frontendTagID:e.trigger[t].trigger.tags[i],triggerName:t})}window.jentis.tracker.executeFrontendTagsWhichWereBlockedByExcludeTriggers(e)},this.trackAsyncCase=function(e,t,r){var i=!1;for(var n in"async-variables"===t&&(i=!0),r.triggers){var a=r.triggers[n];if(a.trigger=n,e.trigger[n]=window.jentis.tracker.allTriggerConditionsFulfilled({triggerName:n,overwriteTrigger:a,scopeOfTheState:e,cacheEnrichmentVariables:i}),!1===e.trigger[n].frontendFulfilled)if(0===e.trigger[n].frontendHTTPConditionIncludedWithoutConsent.length&&0===e.trigger[n].enrichmentConditionIncludedInReferences.length)for(var o=0;o<e.trigger[n].trigger.tags.length;o++)"async-variables"===t&&void 0===r.tags[e.trigger[n].trigger.tags[o]]&&void 0!==e.cacheForEnrichmentScope.tags[e.trigger[n].trigger.tags[o]]&&(r.tags[e.trigger[n].trigger.tags[o]]=e.cacheForEnrichmentScope.tags[e.trigger[n].trigger.tags[o]]),window.jentis.tracker.sendNotExecutedTagToMonitor({scopeOfTheState:e,frontendTag:r.tags[e.trigger[n].trigger.tags[o]],frontendTagID:e.trigger[n].trigger.tags[o],triggerName:n}),delete e._cacheForHTTPVariables.tags[e.trigger[n].trigger.tags[o]],delete e.cacheForEnrichmentScope.triggers[n],delete e.cacheForEnrichmentScope.tags[e.trigger[n].trigger.tags[o]];else if("async-variables"===t&&!0===window.jentis.tracker.hasAConnectedTagToASpecificTriggerEnrichmentVariables(e,a.tags)){e.cacheForEnrichmentScope.triggers[n]=a;for(var s=0;s<a.tags.length;s++)void 0!==r.tags[a.tags[s]]&&(e.cacheForEnrichmentScope.tags[a.tags[s]]=r.tags[a.tags[s]],delete r.tags[a.tags[s]])}else{var c=window.jentis.tracker.extractFrontendTagsConnectedToATriggerFromCache(e,a.tags,r);window.jentis.tracker.addTriggerToWaitingCacheUntilConsentIsGiven(e,n,c)}else 0===e.trigger[n].trigger.excludeTrigger.length&&(window.jentis.tracker.log("J-DCP","[STATE] [TRIGGER] - [AS02] Trigger executed: "+a.trigger+" in scope Client-Side",!1,"AS02"),void 0!==e.trigger[n].trigger.codeblocks&&e.trigger[n].trigger.codeblocks.length>0&&window.jentis.tracker.executeCodeblocks(e.trigger[n].trigger))}window.jentis.tracker.checkAndResolveFrontendTagsForScope({scopeOfTheState:e,overwriteTags:r.tags,cacheEnrichmentVariables:i}),window.jentis.tracker.executeFrontendTagsWhichWereBlockedByExcludeTriggers(e),!0===e.bIsThereAFrontendTriggerBecauseOfConsentMissing&&(window.jentis.tracker.jtsFrontendScopeOfTheStateCache[e.primaryKey]=e)},this.hasAConnectedTagToASpecificTriggerEnrichmentVariables=function(e,t){for(var r=0;r<t.length;r++)if(void 0!==e.cacheForEnrichmentScope.tags[t[r]])return!0;return!1},this.extractFrontendTagsConnectedToATriggerFromCache=function(e,t,r){for(var i={},n=0;n<t.length;n++)void 0!==r.tags[t[n]]&&(i[t[n]]=r.tags[t[n]]);return i},this.executeCodeblocks=function(e){if(void 0!==e.codeblocks)for(var t=window.jentis.tracker.orderCodeblocks(e.codeblocks),r=0;r<t.length;r++)window.jentis.tracker.log("J-DCP","[CODEBLOCK] - [AS03] Codeblock executed: "+t[r].id,!1,"AS03"),"function"==typeof t[r].js&&t[r].js.apply(null,[]),void 0!==t[r].css&&t[r].css.trim().length>0&&window.jentis.tracker.addElementToDOM("style",t[r].css);e.codeblocks=[]},this.checkAndResolveFrontendTagsForScope=function(e){var t=void 0!==e.cacheHTTPVariables&&e.cacheHTTPVariables,r=void 0!==e.cacheEnrichmentVariables&&e.cacheEnrichmentVariables,i=void 0!==e.triggerName?e.triggerName:void 0,n=void 0!==e.overwriteTags?e.overwriteTags:void 0,a=void 0!==e.pushToCacheDirectly&&e.pushToCacheDirectly,o=window.jentis.tracker.resolveFrontendTagsRelatedToTrigger({scopeOfTheState:e.scopeOfTheState,cacheEnrichmentVariables:r,cacheHTTPVariables:t,triggerName:i,overwriteTags:n});window.jentis.tracker.decideWhatToDoWithFrontendTags({scopeOfTheState:e.scopeOfTheState,frontendTags:o,triggerName:i,cacheHTTPVariables:t,pushToCacheDirectly:a})},this.addTriggerToWaitingCacheUntilConsentIsGiven=function(e,t,r,i){if(void 0===i||void 0!==i&&!1===i){e.bIsThereAFrontendTriggerBecauseOfConsentMissing=!0;var n=window.jentis.tracker.getIndexOfJtsFrontendTriggerCacheEntry(e,t);if(e.triggerWaitingForConsent.indexOf(t)>-1&&n>-1)for(var a in r)window.jentis.tracker.jtsFrontendTriggerCache[n].tags[a]=r[a];else e.triggerWaitingForConsent.push(t),window.jentis.tracker.jtsFrontendTriggerCache.push({timestamp:e.timestamp,primaryKey:e.primaryKey,triggerName:t,tags:r,httpVariables:e.trigger[t].frontendHTTPConditionIncludedWithoutConsent})}else window.jentis.tracker.jtsFrontendTriggerCache.push({timestamp:e.timestamp,primaryKey:e.primaryKey,triggerName:t,tags:r,httpVariables:e.trigger[t].frontendHTTPConditionIncludedWithoutConsent})},this.getIndexOfJtsFrontendTriggerCacheEntry=function(e,t){for(var r=0;r<window.jentis.tracker.jtsFrontendTriggerCache.length;r++){var i=window.jentis.tracker.jtsFrontendTriggerCache[r];if(i.primaryKey===e.primaryKey&&i.triggerName===t)return r}return-1},this.decideWhatToDoWithFrontendTags=function(e){for(var t=e.scopeOfTheState,r=e.frontendTags,i=e.triggerName,n=void 0!==e.cacheHTTPVariables&&e.cacheHTTPVariables,a=t.state,o=t.element,s=void 0!==e.pushToCacheDirectly&&e.pushToCacheDirectly,c=0;c<r.length;c++){var d=r[c],g=i;if(void 0===i&&(g=d.tag.trigger),void 0===d.enrichmentVariables&&(d.enrichmentVariables=[]),d.enrichmentVariables.length>0||void 0!==t.trigger&&void 0!==t.trigger[g]&&void 0!==t.trigger[g].enrichmentVariables&&t.trigger[g].enrichmentVariables.length>0)window.jentis.tracker.mergeArrayWithoutDuplicates(t.cacheForEnrichmentScope.enrichmentVariables,d.enrichmentVariables),t.cacheForEnrichmentScope.tags[d.tag.tagID]=d.tag;else{var l=d.tag;if(l.httpVariables.length>0&&!0===n||void 0!==t.trigger&&void 0!==t.trigger[g]&&void 0!==t.trigger[g].httpVariables&&t.trigger[g].httpVariables.length>0){t._cacheForHTTPVariables.tags[d.tag.tagID]=d.tag;continue}if(void 0!==l.blockedVariables&&l.blockedVariables.length>0){!0===n?t._cacheForHTTPVariables.tags[d.tag.tagID]=d.tag:t.cacheForEnrichmentScope.tags[d.tag.tagID]=d.tag;continue}if(void 0!==t.triggerWaitingForConsent&&t.triggerWaitingForConsent.indexOf(g)>-1)continue;if(!0===t.trigger[g].frontendFulfilled&&t.trigger[g].trigger.excludeTrigger.length>0){void 0===t.tagsWaitingBecauseOfExcludeTrigger[g]&&(t.tagsWaitingBecauseOfExcludeTrigger[g]=[]),t.tagsWaitingBecauseOfExcludeTrigger[g].push(d);continue}if(!1===t.trigger[g].frontendFulfilled){t._cacheForHTTPVariables.tags[d.tag.tagID]=d.tag;continue}if(!0===window.jentis.tracker.isTrackingAllowedForClientSideTag(l)&&!1===s)window.jentis.tracker.sendFrontendTag(t,l);else{var _={state:a,tag:l,element:o,trigger:{},timestamp:t.timestamp,_variables:t._variables,triggerForMonitor:t.triggerForMonitor,stateEventID:t.stateEventID};_.trigger[g]=t.trigger[g],window.jentis.tracker.jtsFrontendTagCache.push(_)}}}},this.isTrackingAllowedForClientSideTag=function(e){return!0===window.jentis.config.trackingConsentGiven&&(!0===window.jentis.tracker.isConsentGiven(e.vendorID)||"ncm"===window.jentis.tracker.isConsentGiven(e.vendorID)&&!0===e.essential_mode_enabled)},this.startAsynchronousHTTPVariableEvaluation=function(e){var t=e.scopeOfTheState;t._variables=t._variables||{},t._cacheForHTTPVariables=t._cacheForHTTPVariables||{},t._cacheForHTTPVariables.httpVariables=t._cacheForHTTPVariables.httpVariables||{},t._cacheForHTTPVariables.referenceCache=t._cacheForHTTPVariables.referenceCache||{};var r=e.variablesSortedByTrigger,i=e.callback,n={executedVariable:{},triggerVariableExecutedForBackend:{},triggerVariableCacheForBackend:{}},a={},o=!1,s="",c=!1;for(var d in r)for(var g=0;g<r[d].length;g++){s=r[d][g],c=window.jentis.tracker.isConsentGivenForVariable(s);var l=s;if(void 0===t.blockedVariablesDueToReferenceMissing[l]){if(void 0!==window.jentis.config.jtm.variables[l].dependencies&&window.jentis.config.jtm.variables[l].dependencies.length>0){for(var _=0;_<window.jentis.config.jtm.variables[l].dependencies.length;_++){var u=window.jentis.config.jtm.variables[l].dependencies[_];t._cacheForHTTPVariables.httpVariables[d].indexOf(u)>-1&&(void 0===t._cacheForHTTPVariables.referenceCache[u]&&(t._cacheForHTTPVariables.referenceCache[u]={}),void 0===t._cacheForHTTPVariables.referenceCache[u][l]&&(t._cacheForHTTPVariables.referenceCache[u][l]={},t._cacheForHTTPVariables.referenceCache[u][l].triggerName=[]),-1===t._cacheForHTTPVariables.referenceCache[u][l].triggerName.indexOf(d)&&t._cacheForHTTPVariables.referenceCache[u][l].triggerName.push(d))}void 0===t.blockedVariablesDueToReferenceMissing[l]&&(t.blockedVariablesDueToReferenceMissing[l]={},t.blockedVariablesDueToReferenceMissing[l].dependencies=window.jentis.tracker.cloneObject(window.jentis.config.jtm.variables[l].dependencies),t.blockedVariablesDueToReferenceMissing[l].triggers=[]),t.blockedVariablesDueToReferenceMissing[l].triggers.push({triggerName:d});continue}}else if(t.blockedVariablesDueToReferenceMissing[l].dependencies.length>0)continue;c||void 0!==window.jentis.config.jtm.variables[s]&&void 0!==window.jentis.config.jtm.variables[s].vendorids&&window.jentis.config.jtm.variables[s].vendorids.indexOf("*")>-1?(o=!0,void 0===a[d]&&(a[d]=[]),window.jentis.tracker.mergeArrayWithoutDuplicates(a[d],[s])):void 0!==t._cacheForHTTPVariables&&void 0!==t._cacheForHTTPVariables.backend&&void 0!==t._cacheForHTTPVariables.backend[d]&&t._cacheForHTTPVariables.backend[d].indexOf(s)>-1&&(void 0===n.triggerVariableCacheForBackend[d]&&(n.triggerVariableCacheForBackend[d]=[]),window.jentis.tracker.mergeArrayWithoutDuplicates(n.triggerVariableCacheForBackend[d],[s]))}if((!0===window.jentis.config.trackingConsentGiven||!0===o)&&Object.keys(a).length>0)for(var d in a)for(var h=window.jentis.tracker.cloneObject(a[d]),p=0;p<h.length;p++)window.jentis.tracker.getValueOfVariable({variableName:h[p],triggerName:d,scopeOfTheState:t,funcSendHTTPRequest:function(e,t){e.callback=t,window.jentis.tracker.sendHTTPStream(e)},funcCallback:function(e,t,r,i,n){return function(o){void 0===t.executedVariable[r]&&(t.executedVariable[r]={}),void 0===t.triggerVariableExecutedForBackend[r]&&(t.triggerVariableExecutedForBackend[r]=[]),void 0===t.executedVariable[r][i]&&(window.jentis.tracker.log("J-DCP","[VARIABLE] - Callback executed for variable: "+i+" | Value: "+o+" | Trigger: "+r),t.executedVariable[r][i]=!0,window.jentis.tracker.saveVariableToScope(e,r,i,o),a[r].splice(a[r].indexOf(i),1),window.jentis.tracker.mergeArrayWithoutDuplicates(t.triggerVariableExecutedForBackend[r],[i]),0===Object.keys(a[r]).length&&(delete a[r],0===Object.keys(a).length&&n({triggerVariableExecutedForBackend:t.triggerVariableExecutedForBackend,triggerVariableCacheForBackend:t.triggerVariableCacheForBackend,scopeOfTheState:e,consent:!0})))}}(t,n,d,h[p],i)});else i({triggerVariableCacheForBackend:n.triggerVariableCacheForBackend,scopeOfTheState:t,consent:!1})},this.addEnrichmentInformationToVariableScope=function(e,t){void 0!==t.oVars[e.toUpperCase()].enrichment&&Object.keys(t.oVars[e.toUpperCase()].enrichment).length>0&&(t.oVars[e.toUpperCase()].enrichment=window.jentis.tracker.buildEnrichmentJSONFromVariables(t.oVars[e.toUpperCase()].enrichment,t))},this.getEnrichmentOfVariables=function(e,t){this.sendHTTPStream({endpoint:"/enrichment",data:JSON.stringify(window.jentis.tracker.buildEnrichmentJSONFromVariables(e.cacheForEnrichmentScope.enrichmentVariables,e)),callback:t,method:"POST",contentType:"application/json",withCredentials:!0})},this.buildEnrichmentJSONFromVariables=function(e,t){for(var r={},i=0;i<e.length;i++)if(void 0!==window.jentis.config.jtm.variables[e[i]]&&void 0!==window.jentis.config.jtm.variables[e[i]].pluginID){var n=window.jentis.config.jtm.variables[e[i]].pluginID;if(void 0===r[n]&&(r[n]={},r[n].arguments={},r[n].variables=[],void 0!==window.jentis.config.jtm.enrichment.plugins&&void 0!==window.jentis.config.jtm.enrichment.plugins[n]&&void 0!==window.jentis.config.jtm.enrichment.plugins[n].arguments))for(var a in window.jentis.config.jtm.enrichment.plugins[n].arguments)r[n].arguments[a]=window.jentis.tracker.getValueOfVariable({state:void 0,variableName:window.jentis.config.jtm.enrichment.plugins[n].arguments[a],scopeOfTheState:t});-1===r[n].variables.indexOf(e[i])&&r[n].variables.push(e[i])}return r},this.trackCachedEvents=function(e,t){t=void 0!==t?t:0;void 0!==window.jentis.tracker.jtsEventCache[t]&&window.jentis.tracker.sendDocumentsToJENTIS({scopeOfTheState:window.jentis.tracker.jtsEventCache[t].scopeOfTheState,consent:e,disableCaching:!0,callback:function(e,t){return function(){t+=1,window.jentis.tracker.trackCachedEvents(e,t)}}(e,t)})},this.trackCachedFrontend=function(){window.jentis.tracker.evaluateCachedFrontendTriggers((function(e){for(var t=[];window.jentis.tracker.jtsFrontendTagCache.length;)t.push(window.jentis.tracker.jtsFrontendTagCache.shift());t=t.sort((function(e,t){return e.timestamp>t.timestamp?1:-1})),window.jentis.tracker.trackCachedFrontendTags(t,0,e)}))},this.evaluateCachedFrontendTriggers=function(e){if(0===window.jentis.tracker.jtsFrontendTriggerCache.length)e(!1);else{for(var t=[];window.jentis.tracker.jtsFrontendTriggerCache.length;)t.push(window.jentis.tracker.jtsFrontendTriggerCache.shift());for(var r=(t=t.sort((function(e,t){return e.timestamp>t.timestamp?1:-1}))).length,i=[],n=!1;t.length;){var a=t.shift(),o={};if(o[a.triggerName]=a.httpVariables,void 0!==window.jentis.tracker.jtsFrontendScopeOfTheStateCache[a.primaryKey]){var s=window.jentis.tracker.jtsFrontendScopeOfTheStateCache[a.primaryKey];window.jentis.tracker.startAsynchronousHTTPVariableEvaluation({scopeOfTheState:s,variablesSortedByTrigger:o,callback:function(e,t,r,i){return function(a){var o=a.scopeOfTheState,s=i.triggerName,c=i.tags;window.jentis.tracker.evaluateDependendVariables(window.jentis.tracker.private.getArrayOfAllBlockedDependencies(o,!0),o,!0,a,(function(i){if(!0===i.consent){var a=window.jentis.tracker.allTriggerConditionsFulfilled({overwriteTrigger:o.trigger[s].trigger,scopeOfTheState:o});o.trigger[s]=a,!0===a.frontendFulfilled&&0===a.trigger.excludeTrigger.length?(window.jentis.tracker.log("J-DCP","[STATE] [TRIGGER] - [AS02] Trigger executed: "+s+" in scope Client-Side",!1,"AS02"),o.triggerWaitingForConsent.indexOf(s)>-1&&o.triggerWaitingForConsent.splice(o.triggerWaitingForConsent.indexOf(s),1),window.jentis.tracker.executeCodeblocks(o.trigger[s].trigger),window.jentis.tracker.checkAndResolveFrontendTagsForScope({scopeOfTheState:o,overwriteTags:c,cacheHTTPVariables:!0,pushToCacheDirectly:!0}),window.jentis.tracker.executeFrontendTagsWhichWereBlockedByExcludeTriggers(o,o.triggerWaitingForConsent),n=!0):!1===a.frontendFulfilled?(o.triggerWaitingForConsent.indexOf(s)>-1&&o.triggerWaitingForConsent.splice(o.triggerWaitingForConsent.indexOf(s),1),window.jentis.tracker.executeFrontendTagsWhichWereBlockedByExcludeTriggers(o,o.triggerWaitingForConsent),n=!0):window.jentis.tracker.addTriggerToWaitingCacheUntilConsentIsGiven(o,s,c,!0)}else window.jentis.tracker.addTriggerToWaitingCacheUntilConsentIsGiven(o,s,c,!0);0===o.triggerWaitingForConsent.length?delete window.jentis.tracker.jtsFrontendScopeOfTheStateCache[o.primaryKey]:window.jentis.tracker.jtsFrontendScopeOfTheStateCache[o.primaryKey]=o,e.push({}),e.length===t&&r(n)}))}}(i,r,e,a)})}}}},this.trackCachedFrontendTags=function(e,t,r){if(void 0!==e[t=void 0!==t?t:0]){var i=e[t];if(void 0!==i)if(!0===window.jentis.tracker.isTrackingAllowedForClientSideTag(i.tag)&&i.tag.httpVariables.length>0){var n={};n[i.tag.trigger]=i.tag.httpVariables;var a={};a[i.tag.tagID]=i.tag;var o={element:i.element,state:i.state,overwriteTags:a,timestamp:i.timestamp,_variables:i._variables,trigger:i.trigger,triggerForMonitor:i.triggerForMonitor,stateEventID:i.stateEventID,blockedVariablesDueToReferenceMissing:{},_cacheForHTTPVariables:{}};o._cacheForHTTPVariables.httpVariables={},o._cacheForHTTPVariables.httpVariables[i.tag.trigger]=i.tag.httpVariables,window.jentis.tracker.startAsynchronousHTTPVariableEvaluation({scopeOfTheState:o,variablesSortedByTrigger:n,callback:function(e,t){return function(i){var n=i.scopeOfTheState;window.jentis.tracker.evaluateDependendVariables(window.jentis.tracker.private.getArrayOfAllBlockedDependencies(n,!0),n,!1,i,(function(i){window.jentis.tracker.checkAndResolveFrontendTagsForScope({scopeOfTheState:n,overwriteTags:n.overwriteTags}),window.jentis.tracker.trackCachedFrontendTags(e,t+=1,r)}))}}(e,t)})}else window.jentis.tracker.decideWhatToDoWithFrontendTags({scopeOfTheState:{element:i.element,state:i.state,timestamp:i.timestamp,_variables:i._variables,trigger:i.trigger,triggerForMonitor:i.triggerForMonitor,stateEventID:i.stateEventID,blockedVariablesDueToReferenceMissing:{}},frontendTags:[i]}),window.jentis.tracker.trackCachedFrontendTags(e,t+=1,r);else window.jentis.tracker.trackCachedFrontendTags(e,t+=1,r)}else!0===r&&window.jentis.tracker.trackCachedFrontend()},this.executePlugins=function(){if(void 0!==window.jentis.config.jtm.plugins)for(var e in window.jentis.config.jtm.plugins)if(void 0!==window.jentis.config.jtm.plugins[e]){var t=window.jentis.config.jtm.plugins[e];t.func.apply({pluginID:t.pluginID,config:t.config,jtsTracker:window.jentis.tracker},[])}},this.startSelectorTracking=function(){for(var e in window.jentis.config.jtm.selectorActions)void 0!==window.jentis.config.jtm.selectorActions[e].selector&&void 0!==window.jentis.config.jtm.selectorActions[e].action&&function(e){document.body.addEventListener(window.jentis.config.jtm.selectorActions[e].action,(function(t){void 0!==t.target&&void 0!==t.target.matches&&!0===t.target.matches(window.jentis.config.jtm.selectorActions[e].selector)&&window.jentis.tracker.executeState(e,t.target,{},"sendBeacon")}))}(e)},this.sendFrontendTag=function(e,t){try{var r=window.jentis.tracker.getFrontendTrackerLibrary(t.pluginID,t.trackerID);t.func.apply(r,[{placeholder:t.placeholder}]),window.jentis.tracker.log("J-DCP : [STATE] [TRIGGER] [TAG] - [AS04] Client-Side Tag Executed > Tool: "+t.pluginID+" | Tag-ID: "+t.tagID+" | Trigger: "+t.trigger,t.placeholder,!0,"AS04"),window.jentis.tracker.sendFrontendTagToMonitor(e,t)}catch(e){window.jentis.helper.sendErrorToLogSystem(e.stack,"J-Tracker>sendFrontendTag - Tag:"+t.tagID+" | Tracker: "+t.trackerID+" - "+e.message),window.jentis.tracker.logError("Function from Frontend-Lib throws error!",e)}},this.sendNotExecutedTagToMonitor=function(e){var t=e.scopeOfTheState,r=e.frontendTag,i=e.frontendTagID,n=e.triggerName;r.tagID=i,r.trigger=n,window.jentis.tracker.sendFrontendTagToMonitor(t,r)},this.sendFrontendTagToMonitor=function(e,t){var r={};if(r.tool_id=t.pluginID,r.id=t.tagID,r.vendor_id=t.vendorID,r.trigger={},r.trigger.id=t.trigger,!0===e.trigger[t.trigger].frontendFulfilled&&e.trigger[t.trigger].trigger.excludeTrigger.length>0?r.trigger.executed=!1:r.trigger.executed=e.trigger[t.trigger].frontendFulfilled,void 0!==e.triggerForMonitor&&void 0!==e.triggerForMonitor[t.trigger]&&void 0!==e.triggerForMonitor[t.trigger].condition?r.trigger.conditions=e.triggerForMonitor[t.trigger].condition:r.trigger.conditions=e.trigger[t.trigger].trigger.condition,r.trigger.excludetriggers=[],void 0!==window.jentis.config.jtm.trigger[t.trigger]&&void 0!==window.jentis.config.jtm.trigger[t.trigger].excludeTrigger&&window.jentis.config.jtm.trigger[t.trigger].excludeTrigger.length>0)for(var i=0;i<window.jentis.config.jtm.trigger[t.trigger].excludeTrigger.length;i++){var n=window.jentis.config.jtm.trigger[t.trigger].excludeTrigger[i],a={};if(a.id=n,void 0!==e.triggerForMonitor[window.jentis.config.jtm.trigger[t.trigger].excludeTrigger[i]])a.executed=e.triggerForMonitor[n].frontendFulfilled,a.conditions=e.triggerForMonitor[n].condition;else{a.executed=!1,a.conditions=window.jentis.tracker.cloneObject(window.jentis.config.jtm.trigger[n].condition);for(var o=0;o<a.conditions.length;o++)for(var s=0;s<a.conditions[o].length;s++)a.conditions[o][s].variablevalue="- CONDITION NOT EVALUATED -",a.conditions[o][s].executed=!1}r.trigger.excludetriggers.push(a)}r.placeholders=t.placeholder;var c=window.jentis.tracker.getEvaluatedVariablesPerType(e._variables);r.frontendVariables=c.frontend,r.constantVariables=c.constant,r.enrichmentVariables=c.enrichment,r.transformationFunctions=t.monitorForFunctions,window.jentis.helper.sendFrontendTagToMonitor(r,e.state,e.stateEventID)},this.getEvaluatedVariablesPerType=function(e){var t={frontend:{},constant:{},enrichment:{}};for(var r in e)void 0!==window.jentis.config.jtm.accountconstants[r]?t.constant[r]=e[r]:!0===window.jentis.tracker.isVariableOfTypeEnrichment(r)?t.enrichment[r]=e[r]:t.frontend[r]=e[r];return t},this.replacePlaceholdersToValues=function(e){var t=e.placeholder,r=e.triggerName,i=e.scopeOfTheState,n=e.frontendTag,a=e.aIndexesWhereArraylistConditionFulfilled,o=void 0!==e.cacheEnrichmentVariables&&e.cacheEnrichmentVariables,s={},c=0,d=[],g=[],l=[],_=0,u=t.match(/\{\{(.*?)\}\}/gi);if(null!==u)for(var h=0;h<u.length;h++){var p=u[h].replace(/\{\{|\}\}/gi,"");if(!0!==window.jentis.tracker.isVariableOfTypeEnrichment(p)||!0!==o){for(var m=window.jentis.tracker.getValueOfVariable({variableName:p,triggerName:r,scopeOfTheState:i}),v=window.jentis.tracker.private.getAllVariableDependencies(p),w=0;w<v.length;w++){var f=v[w];if(!1!==window.jentis.tracker.getScopeOfVariable(f))void 0===window.jentis.tracker.getValueOfVariable({variableName:f,triggerName:r,scopeOfTheState:i,cacheEnrichmentVariables:o})&&g.push(f)}if(void 0!==m){if(_++,void 0!==i.blockedVariablesDueToReferenceMissing[p]&&i.blockedVariablesDueToReferenceMissing[p].dependencies.length>0){l.push(p);continue}"object"==typeof m&&"[object Array]"!==Object.prototype.toString.call(m)?t=t.replace(u[h],m):"object"==typeof m&&"[object Array]"===Object.prototype.toString.call(m)?(s[u[h]]=m,c<m.length&&(c=m.length)):t=1===u.length&&t.length-u[h].length==0?m:t.replace(u[h],m)}else g.push(p)}else d.push(p)}else u=[];if(_===u.length&&t.length>0)if(Object.keys(s).length>0){var b=[],j=[];void 0!==a&&(c=a.length);for(var T=0;T<c;T++){var k=t,y=T;for(var f in void 0!==a&&(y=a[T]),s)k=void 0!==s[f][y]?Object.keys(s).length>1?k.replace(f,s[f][y]):k.length===f.length?s[f][y]:k.replace(f,s[f][y]):k.replace(f,"");b.push(window.jentis.tracker.executeTransformationFunctions(k,!0,n,0===T?j:void 0))}t=b;for(var C=0;C<j.length;C++){var S=j[C];if(void 0!==window.jentis.config.jtm.functions[S]){let e;var V={};V.input=t;try{t=window.jentis.config.jtm.functions[S](t),V.success=!0}catch(t){e=t.message,V.success=!1,V.error=e,window.jentis.tracker.logError("Function throws error on execution!",t)}V.output=t,V.logs=[],n.monitorForFunctions[S].push(V)}}}else t=window.jentis.tracker.executeTransformationFunctions(t,!0,n);return{placeholder:t,enrichmentVariables:d,httpVariables:g,blockedVariables:l}},this.executeTransformationFunctions=function(e,t,r,i){void 0===t&&(t=!0);let n=[],a=0,o=0,s=!1;for(let t=0;t<e.length;t++)"("===e[t]?(0===a&&(o=t),a++):","===e[t]?a>0&&(s=!0):")"===e[t]&&(a--,0===a&&!0===s&&(n.push(e.substr(o,t-o+1)),s=!1));for(let a=0;a<n.length;a++){var c=n[a],d=c.substring(1,c.indexOf(",")),g=c.substring(c.indexOf(",")+1,c.length-1);let o;if(e="string"==typeof(g=this.executeTransformationFunctions(g,!1,r,i))?{stream:e,value:g}:{stream:e,value:g.stream},void 0!==window.jentis.config.jtm.functions[d]){let t;if(void 0===r.monitorForFunctions&&(r.monitorForFunctions={}),void 0===r.monitorForFunctions[d]&&(r.monitorForFunctions[d]=[]),1===window.jentis.config.jtm.functions[d].length){var l={};l.input=e.value;try{o=window.jentis.config.jtm.functions[d](e.value),l.success=!0}catch(e){t=e.message,o="",l.success=!1,l.error=t,window.jentis.tracker.logError("Function throws error on execution!",e)}l.output=o,l.logs=[],r.monitorForFunctions[d].push(l)}else void 0!==i&&i.push(d),o=e.value}void 0!==o&&(e.stream=e.stream.replace(c,o)),!0===t&&(e=e.stream)}return e},this.getFrontendTrackerLibrary=function(e,t){if(void 0!==window.jentis.tracker.jtm.frontendLib[t])return window.jentis.tracker.jtm.frontendLib[t];if(void 0!==window.jentis.config.jtm.frontendLibs[e]&&void 0!==window.jentis.config.jtm.frontendLibs[e].lib){var r={};void 0!==window.jentis.config.jtm.frontendLibs[e].tracker&&void 0!==window.jentis.config.jtm.frontendLibs[e].tracker[t]&&(r=window.jentis.config.jtm.frontendLibs[e].tracker[t]);var i=window.jentis.config.jtm.pluginIDtoVendorID[e][t],n=new window.jentis.config.jtm.frontendLibs[e].lib({pluginID:e,trackerID:t,jtsTracker:window.jentis.tracker,config:r,accountvars:window.jentis.config.jtm.accountconstants,consent:window.jentis.tracker.isConsentGiven(i)});return window.jentis.tracker.jtm.frontendLib[t]=n,window.jentis.tracker.jtm.frontendLib[t]}throw"window.jentis.config.jtm.frontendLibs: "+e+" NOT FOUND!"},this.isNewUser=function(){return null===this.readDocumentID("user")},this.sendDocumentsToJENTIS=function(e){var t,r;!0===window.jentis.config.trackingConsentGiven?window.jentis.tracker.startAsynchronousHTTPVariableEvaluation({scopeOfTheState:e.scopeOfTheState,variablesSortedByTrigger:e.scopeOfTheState.httpvarsSortedPerTrigger,callback:(t=e.callback,r=e.consent,function(i){window.jentis.tracker.evaluateDependendVariables(window.jentis.tracker.private.getArrayOfAllBlockedDependencies(e.scopeOfTheState,!0),e.scopeOfTheState,!0,i,(function(e){for(var i in e.triggerVariableExecutedForBackend)window.jentis.tracker.resolveTriggerVariablesForBackend({triggerName:i,scopeOfTheState:e.scopeOfTheState,variables:e.triggerVariableExecutedForBackend[i]});e.scopeOfTheState.httpvarsSortedPerTrigger=e.triggerVariableCacheForBackend;var n=[];window.jentis.tracker.addEnrichmentInformationToVariableScope("USER",e.scopeOfTheState),window.jentis.tracker.addEnrichmentInformationToVariableScope("SESSION",e.scopeOfTheState),window.jentis.tracker.addEnrichmentInformationToVariableScope("EVENT",e.scopeOfTheState),n.push(window.jentis.tracker.trackUserDocument(e.scopeOfTheState.oVars.USER)),n.push(window.jentis.tracker.trackSessionDocument(window.jentis.tracker.isNewUser(),e.scopeOfTheState.oVars.SESSION)),n.push(window.jentis.tracker.trackEventDocument(e.scopeOfTheState,e.scopeOfTheState.oVars.EVENT,r)),window.jentis.tracker.sendDocumentsToDatareceiver(n,e.scopeOfTheState.state,e.scopeOfTheState.requestType),void 0!==t&&t()}))})}):window.jentis.tracker.log("J-DCP","[STATE] - Tracking not allowed, because no consent is given. State: "+e.scopeOfTheState.state),(void 0===e.disableCaching||void 0!==e.disableCaching&&!1===e.disableCaching)&&window.jentis.tracker.jtsEventCache.push({scopeOfTheState:e.scopeOfTheState})},this.trackUserDocument=function(e){void 0===e&&(e={}),void 0===e.property&&(e.property={});var t={},r=this.readDocumentID("user");return null===r?(t._id=this.createDocumentID("user"),t.action="new",window.jentis.helper.setEvent("jentis.tracker","jentis-userid",t._id)):(t._id=r,t.action="upd"),t.account=window.jentis.config.account,t.documentType="user",t.property=e.property,t.system={},void 0!==e.enrichment&&Object.keys(e.enrichment).length>0&&(t.system.enrichment=e.enrichment),t.aggr={},t.parent={},t},this.trackSessionDocument=function(e,t){void 0===t&&(t={}),void 0===t.property&&(t.property={});var r={};void 0===e&&(e=!1);var i=window.jentis.helper.readCookie("jctr_sid"),n=window.jentis.tracker.getPreviewVersion();if(t.property.jts_version="string"==typeof n?n:"_",void 0!==window.jentis.config.frontend.debug&&null!==window.jentis.config.frontend.debug&&(t.property.jts_debug=window.jentis.config.frontend.debug),!0===e||!1===e&&null===i)r._id=this.createDocumentID("session"),r.action="new";else{var a=this.readDocumentID("session");null===a&&(a=i,this.updateDocumentID("session",i)),r._id=a,r.action="upd"}r.account=window.jentis.config.account,r.documentType="session",r.property=t.property,r.system={};var o=window.jentis.tracker.getAutomationId();return o&&(r.system.jts_automation_id=o),void 0!==t.enrichment&&Object.keys(t.enrichment).length>0&&(r.system.enrichment=t.enrichment),r.aggr={},r.parent={user:this.readDocumentID("user")},void 0!==window.navigator&&"undefined"!==window.navigator.userAgent&&(r.system["navigator-userAgent"]=window.navigator.userAgent),window.jentis.helper.setCookie({name:"jctr_sid",value:r._id,exdays:{m:30}}),r},this.trackEventDocument=function(e,t,r){var i={_id:e.stateEventID,documentType:"event",action:"new",parent:{user:this.readDocumentID("user"),session:this.readDocumentID("session")},account:window.jentis.config.account,aggr:{},pluginid:e.state,system:{href:window.location.href},property:t.property};return void 0!==t.enrichment&&Object.keys(t.enrichment).length>0&&(i.system.enrichment=t.enrichment),i.system.consent=void 0!==r?r:window.jentis.consent.engine.getAllConsents(),i.system.consentStatus=window.jentis.tracker.getConsentStatus(),i},this.trackConsentDocument=function(e){return{_id:this.createDocumentID("consent"),documentType:"consent",action:"new",parent:{user:this.readDocumentID("user")},account:window.jentis.config.account,aggr:{},property:e}},this.trackConsent=function(e){var t=[];t.push(this.trackUserDocument()),t.push(this.trackConsentDocument(e));var r=!1;for(vendors in e.vendors)if(!1!==e.vendors[vendors]){r=!0;break}this.sendDocumentsToDatareceiver(t,"JENTIS Consent Data",!1,r)},this.getValueOfVariable=function(e){var t=e.scopeOfTheState,r=void 0!==e.state?e.state:t.state,i=e.variableName,n=e.triggerName,a=void 0!==e.cacheEnrichmentVariables&&e.cacheEnrichmentVariables,o=void 0!==e.funcSendHTTPRequest?e.funcSendHTTPRequest:function(e,t){},s=e.funcCallback;try{if(void 0!==window.jentis.config.jtm.variables[i]){if(!0===window.jentis.tracker.isVariableTriggerRelated(i)&&void 0!==n&&void 0!==t._variables._jts_sys_trigger&&void 0!==t._variables._jts_sys_trigger[n]&&void 0!==t._variables._jts_sys_trigger[n][i]){if(void 0===s)return t._variables._jts_sys_trigger[n][i];s(t._variables._jts_sys_trigger[n][i])}else if(void 0!==t._variables[i]){if(void 0===s)return t._variables[i];s(t._variables[i])}if(!0===window.jentis.tracker.isVariableOfTypeEnrichment(i)){if(!1===a)return void 0!==t._variables[i]?t._variables[i]:(window.jentis.tracker.logError("getValueOfVariable(): "+i+" <> Value not found after successful enrichment! | State: "+(void 0===r?"Selector Action":r)),"");!1!==window.jentis.tracker.getScopeOfVariable(i)?(void 0===t.oVars[window.jentis.config.jtm.variables[i].scope.toUpperCase()].enrichment&&(t.oVars[window.jentis.config.jtm.variables[i].scope.toUpperCase()].enrichment=[]),-1===t.oVars[window.jentis.config.jtm.variables[i].scope.toUpperCase()].enrichment.indexOf(i)&&t.oVars[window.jentis.config.jtm.variables[i].scope.toUpperCase()].enrichment.push(i)):window.jentis.tracker.logError("getValueOfVariable(): "+i+" <> Scope not found for ENRICHMENT! | State: "+(void 0===r?"Selector Action":r))}var c=window.jentis.tracker.evaluateFrontendVariable({variableName:i,triggerName:n,scopeOfTheState:t,funcSendHTTPRequest:o,funcCallback:s});if(void 0===c){var d=[];if(void 0===window.jentis.config.jtm.variables[i].template?(void 0===t._cacheForHTTPVariables.httpVariables[n]&&(t._cacheForHTTPVariables.httpVariables[n]=[]),window.jentis.tracker.mergeArrayWithoutDuplicates(t._cacheForHTTPVariables.httpVariables[n],[i]),void 0!==window.jentis.config.jtm.variables[i]&&void 0!==window.jentis.config.jtm.variables[i].dependencies&&(d=window.jentis.config.jtm.variables[i].dependencies)):d=t.templateVariables[i].dependencies,d.length>0)for(var g=0;g<d.length;g++){var l=d[g],_=i;void 0===t._cacheForHTTPVariables.referenceCache[l]&&(t._cacheForHTTPVariables.referenceCache[l]={}),void 0===t._cacheForHTTPVariables.referenceCache[l][_]&&(t._cacheForHTTPVariables.referenceCache[l][_]={},t._cacheForHTTPVariables.referenceCache[l][_].triggerName=[]),-1===t._cacheForHTTPVariables.referenceCache[l][_].triggerName.indexOf(n)&&t._cacheForHTTPVariables.referenceCache[l][_].triggerName.push(n),void 0===t.blockedVariablesDueToReferenceMissing[_]&&(t.blockedVariablesDueToReferenceMissing[_]={},t.blockedVariablesDueToReferenceMissing[_].dependencies=window.jentis.tracker.cloneObject(d),t.blockedVariablesDueToReferenceMissing[_].triggers=[]),t.blockedVariablesDueToReferenceMissing[_].triggers.push({triggerName:n})}}else(void 0===t.blockedVariablesDueToReferenceMissing[i]||void 0!==t.blockedVariablesDueToReferenceMissing[i]&&0===t.blockedVariablesDueToReferenceMissing[i].dependencies.length)&&window.jentis.tracker.saveVariableToScope(t,n,i,c);return c}return""}catch(e){return window.jentis.helper.sendErrorToLogSystem(e.stack,"J-Tracker>getValueOfVariable - Var:"+i+" | State: "+(void 0===r?"Selector Action":r)+" | "+e.message),window.jentis.tracker.logError("getValueOfVariable(): "+i+" | State: "+(void 0===r?"Selector Action":r),e),""}},this.evaluateFrontendVariable=function(e){var t=e.scopeOfTheState,r=e.variableName,i=t.element,n=t.state,a=e.triggerName,o=e.funcSendHTTPRequest,s=!1,c=function(){};"function"==typeof e.funcCallback&&(c=e.funcCallback,s=!0);var d="",g={element:i,accountvars:window.jentis.config.jtm.accountconstants,stateContext:t.contextualStateInformation,callback:c},l={variableid:r,triggername:a,sendHTTPRequest:o,setCookie:function(e){"object"==typeof e?(e.vendorids=window.jentis.config.jtm.variables[this.variableid].vendorids,window.jentis.helper.setCookie(e)):window.jentis.tracker.log("J-DCP","[setCookie] Argument must be of type object")},readCookie:function(e){return"string"==typeof e?window.jentis.helper.readCookie(e):(window.jentis.tracker.log("J-DCP","[readCookie] Argument must be of type string"),null)},setServerCookie:function(e){"object"==typeof e?(e.vendorids=window.jentis.config.jtm.variables[this.variableid].vendorids,window.jentis.helper.setServerCookie(e)):window.jentis.tracker.log("J-DCP","[setServerCookie] Argument must be of type object")},setLocalStorageItem:function(e,t,r){return window.jentis.helper.setLocalStorageItem(e,t,r)},getLocalStorageItem:function(e){return window.jentis.helper.getLocalStorageItem(e)},getFrontendVariable:function(e,t,r){return function(i){var n=window.jentis.tracker.getValueOfVariable({variableName:i,triggerName:t,scopeOfTheState:e});return void 0===n&&(void 0===e._cacheForHTTPVariables.referenceCache[i]&&(e._cacheForHTTPVariables.referenceCache[i]={}),void 0===e._cacheForHTTPVariables.referenceCache[i][r]&&(e._cacheForHTTPVariables.referenceCache[i][r]={},e._cacheForHTTPVariables.referenceCache[i][r].triggerName=[]),-1===e._cacheForHTTPVariables.referenceCache[i][r].triggerName.indexOf(t)&&e._cacheForHTTPVariables.referenceCache[i][r].triggerName.push(t),void 0===e.blockedVariablesDueToReferenceMissing[r]&&(e.blockedVariablesDueToReferenceMissing[r]={},e.blockedVariablesDueToReferenceMissing[r].dependencies=window.jentis.tracker.cloneObject(window.jentis.config.jtm.variables[r].dependencies),e.blockedVariablesDueToReferenceMissing[r].triggers=[]),e.blockedVariablesDueToReferenceMissing[r].triggers.push({triggerName:t})),n}}(t,a,r)};if(void 0!==window.jentis.config.jtm.variables[r].template)if(void 0!==window.jentis.config.jtm.variables[r].placeholder&&void 0!==window.jentis.config.jtm.template_variables&&void 0!==window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[r].template]&&"function"==typeof window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[r].template].value){void 0===t.templateVariables&&(t.templateVariables={}),void 0===t.templateVariables[r]&&(t.templateVariables[r]={},t.templateVariables[r].dependencies=[],t.templateVariables[r].evaluateFirst=window.jentis.config.jtm.variables[r].evaluateFirst||[],t.templateVariables[r].placeholder=window.jentis.tracker.cloneObject(window.jentis.config.jtm.variables[r].placeholder));var _=!1,u=[];if(void 0!==t.templateVariables[r].evaluateFirst&&t.templateVariables[r].evaluateFirst.length>0)for(var h=0;h<t.templateVariables[r].evaluateFirst.length;h++){var p=t.templateVariables[r].evaluateFirst[h];if(void 0!==t.templateVariables[r].placeholder[p]){var m=window.jentis.tracker.getValueOfVariable({variableName:t.templateVariables[r].placeholder[p],triggerName:a,scopeOfTheState:t,funcSendHTTPRequest:o});u.push(t.templateVariables[r].placeholder[p]),void 0!==m?t.templateVariables[r].placeholder[p]=m:_=!0}}_?(d=void 0,t.templateVariables[r].dependencies=u):(g.placeholder=t.templateVariables[r].placeholder,d=window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[r].template].value.apply(l,[g]),!0===s&&window.setTimeout((function(){g.callback("")}),2e3))}else window.jentis.tracker.logError("getValueOfVariable(): "+r+" <> Template not found! | State: "+(void 0===n?"Selector Action":n),{});else"string"==typeof window.jentis.config.jtm.variables[r].value?d=window.jentis.config.jtm.variables[r].value:"function"==typeof window.jentis.config.jtm.variables[r].value&&(d=window.jentis.config.jtm.variables[r].value.apply(l,[g]),!0===s&&window.setTimeout((function(){g.callback("")}),2e3));return d},this.saveVariableToScope=function(e,t,r,i){this.saveVariableToScope_variables(e,t,r,i),!1===window.jentis.tracker.isVariableOfTypeEnrichment(r)&&this.saveVariableToScope_oVars(e,t,r,i)},this.saveVariableToScope_oVars=function(e,t,r,i){var n=window.jentis.tracker.getScopeOfVariable(r);void 0===e.oVars&&(e.oVars={}),void 0===e.oVars&&(e.oVars={}),void 0===e.oVars[n]&&(e.oVars[n]={}),void 0===e.oVars[n].property&&(e.oVars[n].property={}),!0===window.jentis.tracker.isVariableTriggerRelated(r)?(void 0===e.oVars[n].property._jts_sys_trigger&&(e.oVars[n].property._jts_sys_trigger={}),void 0===e.oVars[n].property._jts_sys_trigger[t]&&(e.oVars[n].property._jts_sys_trigger[t]={}),e.oVars[n].property._jts_sys_trigger[t][r]=i):e.oVars[n].property[r]=i},this.saveVariableToScope_variables=function(e,t,r,i){!0===window.jentis.tracker.isVariableTriggerRelated(r)?(void 0===e._variables._jts_sys_trigger&&(e._variables._jts_sys_trigger={}),void 0!==t&&(void 0===e._variables._jts_sys_trigger[t]&&(e._variables._jts_sys_trigger[t]={}),e._variables._jts_sys_trigger[t][r]=i)):(void 0===e._variables&&(e._variables={}),e._variables[r]=i)},this.getValueTypeToMatch=function(e){try{return"object"==typeof e?JSON.stringify(e):void 0===e?"undefined":e.toString()}catch(t){return window.jentis.tracker.logError("getValueTypeToMatch(): "+e+" - Problem",t),""}},this.isVariableTriggerRelated=function(e){if(void 0!==window.jentis.config.jtm.variables[e])if(void 0!==window.jentis.config.jtm.variables[e].template){if(void 0!==window.jentis.config.jtm.template_variables&&void 0!==window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[e].template]&&void 0!==window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[e].template].triggerRelated)return window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[e].template].triggerRelated}else if(void 0!==window.jentis.config.jtm.variables[e].triggerRelated)return window.jentis.config.jtm.variables[e].triggerRelated;return!1},this.getScopeOfVariable=function(e){if(void 0!==window.jentis.config.jtm.variables[e]){if(void 0!==window.jentis.config.jtm.variables[e].template)return void 0!==window.jentis.config.jtm.template_variables&&void 0!==window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[e].template]&&void 0!==window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[e].template].scope?window.jentis.config.jtm.template_variables[window.jentis.config.jtm.variables[e].template].scope:(window.jentis.tracker.logError("getScopeOfVariable(): "+e+" <> Scope not found!",{}),!1);if(void 0!==window.jentis.config.jtm.variables[e].scope)return window.jentis.config.jtm.variables[e].scope}return!1},this.isVariableOfTypeEnrichment=function(e){return void 0!==window.jentis.config.jtm.variables[e]&&void 0!==window.jentis.config.jtm.variables[e].source&&"ENRICHMENT"===window.jentis.config.jtm.variables[e].source},this.mergeArrayWithoutDuplicates=function(e,t){for(var r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r]);return e},this.checkOperatorMatch=function(e,t,r){let i=this.getValueTypeToMatch(e),n=this.getValueTypeToMatch(r);switch(t){case"eq":return this._equal(i,n);case"neq":return!this._equal(i,n);case"co":return this._contains(i,n);case"nco":return!this._contains(i,n);case"bw":return this._startsWith(i,n);case"nbw":return!this._startsWith(i,n);case"ew":return this._endsWith(i,n);case"new":return!this._endsWith(i,n);case"reg":return this._matchesRegex(r,e);case"nreg":return!this._matchesRegex(r,e);case"bg":return this._bigger(i,n);case"bgeq":return this._biggerEqual(i,n);case"lo":return this._lower(i,n);case"loeq":return this._lowerEqual(i,n);case"j-true":return!0;default:return!1}},this._equal=function(e,t){return e===t},this._contains=function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())>-1},this._startsWith=function(e,t){return!!e.toLowerCase().startsWith(t.toLowerCase())},this._endsWith=function(e,t){return!!e.toLowerCase().endsWith(t.toLowerCase())},this._matchesRegex=function(e,t){return!!new RegExp(e).test(t)},this._bigger=function(e,t){return parseFloat(e)>parseFloat(t)},this._biggerEqual=function(e,t){return parseFloat(e)>=parseFloat(t)},this._lower=function(e,t){return parseFloat(e)<parseFloat(t)},this._lowerEqual=function(e,t){return parseFloat(e)<=parseFloat(t)},this.resolveTriggerVariablesForBackend=function(e){for(var t=e.scopeOfTheState,r=e.triggerName,i=e.variables,n=void 0!==e.cacheEnrichmentVariables&&e.cacheEnrichmentVariables,a=0;a<i.length;a++){var o=i[a];if(!1!==window.jentis.tracker.getScopeOfVariable(o))void 0===window.jentis.tracker.getValueOfVariable({variableName:o,triggerName:r,scopeOfTheState:t,cacheEnrichmentVariables:n})&&(void 0===t._cacheForHTTPVariables.backend[r]&&(t._cacheForHTTPVariables.backend[r]=[]),t._cacheForHTTPVariables.backend[r].push(o))}},this.collectVariablesFromTriggerIncludingExcludeTriggers=function(e,t){var r=[];if((t=t||[]).indexOf(e)>-1)return r;if(t.push(e),void 0!==window.jentis.config.jtm.trigger[e]&&void 0!==window.jentis.config.jtm.trigger[e].variables&&window.jentis.tracker.mergeArrayWithoutDuplicates(r,window.jentis.config.jtm.trigger[e].variables),void 0!==window.jentis.config.jtm.trigger[e].excludeTrigger)for(var i=0;i<window.jentis.config.jtm.trigger[e].excludeTrigger.length;i++){var n=window.jentis.config.jtm.trigger[e].excludeTrigger[i];void 0!==window.jentis.config.jtm.trigger[n]&&void 0!==window.jentis.config.jtm.trigger[n].variables&&window.jentis.tracker.mergeArrayWithoutDuplicates(r,window.jentis.tracker.collectVariablesFromTriggerIncludingExcludeTriggers(n,t))}return r},this.resolveFrontendTagsRelatedToTrigger=function(e){var t=e.scopeOfTheState,r=void 0!==e.triggerName?e.triggerName:"",i=e.overwriteTags,n=void 0!==e.cacheEnrichmentVariables&&e.cacheEnrichmentVariables,a=(void 0!==e.cacheHTTPVariables&&e.cacheHTTPVariables,[]),o=[],s=!1;if(void 0===i)for(var c=0;c<window.jentis.config.jtm.trigger[r].tags.length;c++){if(void 0!==window.jentis.config.jtm.trigger[r].tags[c])if(void 0!==window.jentis.config.jtm.frontendTags[window.jentis.config.jtm.trigger[r].tags[c]])(g=window.jentis.tracker.cloneObject(window.jentis.config.jtm.frontendTags[window.jentis.config.jtm.trigger[r].tags[c]])).tagID=window.jentis.config.jtm.trigger[r].tags[c],g.trigger=r,o.push(g)}else"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&(i=window.jentis.tracker.getArrayFromObject(i)),o=i,s=!0;for(c=0;c<o.length;c++){var d={},g=o[c];for(var l in!0===s&&(r=g.trigger),d.enrichmentVariables=[],d.tag=g,d.tag.httpVariables=[],d.tag.blockedVariables=[],g.placeholder){if(void 0!==g.arraylist&&void 0!==g.arraylist[l])(h=window.jentis.tracker.replacePlaceholdersFromArraylist({arraylist:g.placeholder[l],arraylistcondition:g.arraylist[l],triggerName:r,scopeOfTheState:t,frontendTag:g,cacheEnrichmentVariables:n})).enrichmentVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(d.enrichmentVariables,h.enrichmentVariables),h.httpVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(d.tag.httpVariables,h.httpVariables);else if("object"==typeof g.placeholder[l]){for(var _ in g.placeholder[l])for(var u in g.placeholder[l][_])if("string"==typeof g.placeholder[l][_][u]){var h=window.jentis.tracker.replacePlaceholdersToValues({placeholder:g.placeholder[l][_][u],triggerName:r,scopeOfTheState:t,frontendTag:g,cacheEnrichmentVariables:n});g.placeholder[l][_][u]=h.placeholder,h.enrichmentVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(d.enrichmentVariables,h.enrichmentVariables),h.httpVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(d.tag.httpVariables,h.httpVariables),h.blockedVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(d.tag.blockedVariables,h.blockedVariables)}}else if("string"==typeof g.placeholder[l]){h=window.jentis.tracker.replacePlaceholdersToValues({placeholder:g.placeholder[l],triggerName:r,scopeOfTheState:t,frontendTag:g,cacheEnrichmentVariables:n});g.placeholder[l]=h.placeholder,h.enrichmentVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(d.enrichmentVariables,h.enrichmentVariables),h.httpVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(d.tag.httpVariables,h.httpVariables)}}a.push(d)}return a},this.replacePlaceholdersFromArraylist=function(e){var t=e.arraylist,r=e.arraylistcondition,i=e.scopeOfTheState,n=e.triggerName,a=e.frontendTag,o=void 0!==e.cacheEnrichmentVariables&&e.cacheEnrichmentVariables,s=[],c=[],d=[];if(!0===o&&!0===window.jentis.tracker.isVariableOfTypeEnrichment(r.variable))s.push(r.variable);else if(void 0===r.realizedValue&&(r.realizedValue=window.jentis.tracker.getValueOfVariable({variableName:r.variable,triggerName:n,scopeOfTheState:i})),"object"==typeof r.realizedValue&&"[object Array]"===Object.prototype.toString.call(r.realizedValue))for(var g=0;g<r.realizedValue.length;g++)!0===window.jentis.tracker.checkOperatorMatch(r.realizedValue[g],r.operator,r.value)&&d.push(g);for(var l in t)if("object"==typeof t[l]&&"[object Array]"!==Object.prototype.toString.call(t[l]))for(var g in t[l])for(var _ in t[l][g]){if("string"==typeof t[l][g][_])"object"==typeof(u=window.jentis.tracker.replacePlaceholdersToValues({placeholder:t[l][g][_],triggerName:n,scopeOfTheState:i,frontendTag:a,aIndexesWhereArraylistConditionFulfilled:d,cacheEnrichmentVariables:o})).placeholder&&"[object Array]"===Object.prototype.toString.call(u.placeholder)?t[l][g][_]=u.placeholder:t[l][g][_]=!1===o?[u.placeholder]:u.placeholder,u.enrichmentVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(s,u.enrichmentVariables),u.httpVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(c,u.httpVariables)}else if("string"==typeof t[l]){var u;(u=window.jentis.tracker.replacePlaceholdersToValues({placeholder:t[l],triggerName:n,scopeOfTheState:i,frontendTag:a,aIndexesWhereArraylistConditionFulfilled:d,cacheEnrichmentVariables:o})).enrichmentVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(s,u.enrichmentVariables),u.httpVariables.length>0&&window.jentis.tracker.mergeArrayWithoutDuplicates(c,u.httpVariables),t[l]=u.placeholder}return{enrichmentVariables:s,httpVariables:c}},this.allTriggerConditionsFulfilled=function(e){var t=e.scopeOfTheState,r=e.triggerName,i=e.overwriteTrigger,n=void 0!==e.cacheEnrichmentVariables&&e.cacheEnrichmentVariables,a=void 0!==e.cacheHTTPVariables&&e.cacheHTTPVariables;if(void 0!==i)var o=i;else(o=this.cloneObject(window.jentis.config.jtm.trigger[r])).trigger=r;var s=o.condition,c=[],d=[],g=!1,l=[],_=[],u=[];if(void 0===t.triggerForMonitor&&(t.triggerForMonitor={}),void 0===t.triggerForMonitor[o.trigger]&&(t.triggerForMonitor[o.trigger]={}),void 0===t.triggerForMonitor[o.trigger].condition){t.triggerForMonitor[o.trigger].condition=[];for(var h=0;h<s.length;h++)t.triggerForMonitor[o.trigger].condition.push([])}if(0===s.length)return t.triggerForMonitor[o.trigger].frontendFulFilled=!0,{backendFulfilled:!0,frontendFulfilled:!0,enrichmentVariables:[],httpVariables:d,frontendHTTPConditionIncludedWithoutConsent:l,enrichmentConditionIncludedInReferences:_,dependencies:u,trigger:o};for(h=0;h<s.length;h++){if(0===s[h].length)return t.triggerForMonitor[o.trigger].frontendFulFilled=!0,{backendFulfilled:!0,frontendFulfilled:!0,enrichmentVariables:[],httpVariables:d,frontendHTTPConditionIncludedWithoutConsent:l,enrichmentConditionIncludedInReferences:_,dependencies:u,trigger:o};for(var p=0,m=0,v=0;v<s[h].length;v++){var w=s[h][v];if(!0===this.isVariableOfTypeEnrichment(w.variable)&&!0===n)c.push(w.variable),p+=1,s[h].length-p-m==0&&(g=!0);else{var f=w.variable,b=this.getValueOfVariable({variableName:f,triggerName:o.trigger,scopeOfTheState:t});if(!0===a&&void 0!==t._cacheForHTTPVariables.httpVariables[o.trigger]&&t._cacheForHTTPVariables.httpVariables[o.trigger].indexOf(f)>-1||void 0!==window.jentis.config.jtm.variables[f]&&void 0!==window.jentis.config.jtm.variables[f].template&&void 0===b){window.jentis.tracker.mergeArrayWithoutDuplicates(d,[f]),m+=1;for(var j=0;j<window.jentis.config.jtm.variables[f].dependencies.length;j++){var T=f,k=window.jentis.config.jtm.variables[f].dependencies[j];void 0===t._cacheForHTTPVariables.referenceCache[k]&&(t._cacheForHTTPVariables.referenceCache[k]={}),void 0===t._cacheForHTTPVariables.referenceCache[k][T]&&(t._cacheForHTTPVariables.referenceCache[k][T]={},t._cacheForHTTPVariables.referenceCache[k][T].triggerName=[]),-1===t._cacheForHTTPVariables.referenceCache[k][T].triggerName.indexOf(o.trigger)&&t._cacheForHTTPVariables.referenceCache[k][T].triggerName.push(o.trigger),void 0===t.blockedVariablesDueToReferenceMissing[T]&&(t.blockedVariablesDueToReferenceMissing[T]={},t.blockedVariablesDueToReferenceMissing[T].dependencies=window.jentis.tracker.cloneObject(window.jentis.config.jtm.variables[T].dependencies),t.blockedVariablesDueToReferenceMissing[T].triggers=[]),t.blockedVariablesDueToReferenceMissing[T].triggers.push({triggerName:o.trigger})}s[h].length-p-m==0&&(g=!0)}else{var y;if(!0===window.jentis.tracker.isVariableFromTypeHTTP(f,o.trigger,t)&&!1===window.jentis.tracker.isConsentGivenForVariable(f))window.jentis.tracker.mergeArrayWithoutDuplicates(l,[f]);else if(void 0===t.blockedVariablesDueToReferenceMissing[f]||void 0!==t.blockedVariablesDueToReferenceMissing[f]&&0===t.blockedVariablesDueToReferenceMissing[f].dependencies.length){if(void 0!==w.alreadyNegativeEvaluated&&!1===w.alreadyNegativeEvaluated||void 0===w.alreadyNegativeEvaluated&&this.checkOperatorMatch(b,w.operator,w.value)){if((y=window.jentis.tracker.cloneObject(w)).variablevalue=b,y.executed=!0,t.triggerForMonitor[o.trigger].condition[h].push(y),s[h].splice(v,1),v-=1,0===s[h].length)return t.triggerForMonitor[o.trigger].frontendFulFilled=!0,{backendFulfilled:!0,frontendFulfilled:!0,enrichmentVariables:[],httpVariables:d,frontendHTTPConditionIncludedWithoutConsent:l,enrichmentConditionIncludedInReferences:_,dependencies:u,trigger:o}}else if(void 0===w.alreadyNegativeEvaluated)(y=window.jentis.tracker.cloneObject(w)).variablevalue=b,y.executed=!1,t.triggerForMonitor[o.trigger].condition[h].push(y),w.alreadyNegativeEvaluated=!0}else if(void 0!==t.blockedVariablesDueToReferenceMissing[f]){var C=window.jentis.tracker.private.getAllVariableDependencies(f);for(j=0;j<C.length;j++)!0===window.jentis.tracker.isVariableFromTypeHTTP(C[j],o.trigger,t)&&!1===window.jentis.tracker.isConsentGivenForVariable(C[j])?window.jentis.tracker.mergeArrayWithoutDuplicates(l,[C[j]]):!0===window.jentis.tracker.isVariableOfTypeEnrichment(C[j])&&(window.jentis.tracker.mergeArrayWithoutDuplicates(c,[C[j]]),window.jentis.tracker.mergeArrayWithoutDuplicates(_,[C[j]]));window.jentis.tracker.mergeArrayWithoutDuplicates(u,C)}}}}}if(0===c.length&&0===d.length&&0===l.length)for(var S in t.trigger){var V=t.trigger[S].trigger.excludeTrigger.indexOf(o.trigger);V>-1&&t.trigger[S].trigger.excludeTrigger.splice(V,1)}return t.triggerForMonitor[o.trigger].frontendFulFilled=!1,{backendFulfilled:g,frontendFulfilled:!1,enrichmentVariables:c,httpVariables:d,frontendHTTPConditionIncludedWithoutConsent:l,enrichmentConditionIncludedInReferences:_,dependencies:u,trigger:o}},this.private.getAllVariableDependencies=function(e,t,r){if(void 0===t&&(t=[]),void 0===r&&(r=[]),r.indexOf(e)>-1)return t;if(void 0!==window.jentis.config.jtm.variables[e]&&void 0!==window.jentis.config.jtm.variables[e].dependencies&&window.jentis.config.jtm.variables[e].dependencies.length>0){window.jentis.tracker.mergeArrayWithoutDuplicates(t,window.jentis.config.jtm.variables[e].dependencies);for(var i=0;i<window.jentis.config.jtm.variables[e].dependencies.length;i++)window.jentis.tracker.mergeArrayWithoutDuplicates(t,window.jentis.tracker.private.getAllVariableDependencies(window.jentis.config.jtm.variables[e].dependencies[i],t,r))}return t},this.executeFrontendTagsWhichWereBlockedByExcludeTriggers=function(e,t){var r=e.trigger;for(var i in void 0!==t&&(r=window.jentis.tracker.getObjectFromArray(t)),r){for(var n=!1,a=0;a<e.trigger[i].trigger.excludeTrigger.length;a++){var o=e.trigger[i].trigger.excludeTrigger[a];if(void 0!==e.trigger[o]){if(!1!==e.trigger[o].frontendFulfilled){if(void 0!==e.tagsWaitingBecauseOfExcludeTrigger[i]){for(var s=0;s<e.tagsWaitingBecauseOfExcludeTrigger[i].length;s++){var c=e.tagsWaitingBecauseOfExcludeTrigger[i][s].tag;window.jentis.tracker.sendNotExecutedTagToMonitor({scopeOfTheState:e,frontendTag:window.jentis.tracker.cloneObject(window.jentis.config.jtm.frontendTags[c.tagID]),frontendTagID:c.tagID,triggerName:i})}delete e.tagsWaitingBecauseOfExcludeTrigger[i]}else if(void 0!==t&&e.triggerWaitingForConsent.indexOf(i)>-1)for(var d=0;d<window.jentis.tracker.jtsFrontendTriggerCache.length;d++){var g=window.jentis.tracker.jtsFrontendTriggerCache[d];if(g.primaryKey===e.primaryKey&&g.triggerName===i){for(var l in g.tags){c=g.tags[l];window.jentis.tracker.sendNotExecutedTagToMonitor({scopeOfTheState:e,frontendTag:window.jentis.tracker.cloneObject(window.jentis.config.jtm.frontendTags[c.tagID]),frontendTagID:c.tagID,triggerName:i})}window.jentis.tracker.jtsFrontendTriggerCache.splice(d,1),e.triggerWaitingForConsent.splice(e.triggerWaitingForConsent.indexOf(i),1)}}break}0===e.trigger[o].enrichmentVariables.length&&0===e.trigger[o].httpVariables.length&&(-1===e.triggerWaitingForConsent.indexOf(o)?(e.trigger[i].trigger.excludeTrigger.splice(a,1),a-=1):n=!0)}if(!0===n){var _={};if(void 0!==e.tagsWaitingBecauseOfExcludeTrigger[i])for(var u=0;u<e.tagsWaitingBecauseOfExcludeTrigger[i].length;u++)_[e.tagsWaitingBecauseOfExcludeTrigger[i][u].tag.tagID]=e.tagsWaitingBecauseOfExcludeTrigger[i][u].tag;window.jentis.tracker.addTriggerToWaitingCacheUntilConsentIsGiven(e,i,_),delete e.tagsWaitingBecauseOfExcludeTrigger[i]}}!0===e.trigger[i].frontendFulfilled&&0===e.trigger[i].trigger.excludeTrigger.length&&(e.trigger[i].trigger.codeblocks.length>0&&window.jentis.tracker.executeCodeblocks(e.trigger[i].trigger),void 0!==e.tagsWaitingBecauseOfExcludeTrigger[i]&&!1===n&&(window.jentis.tracker.log("J-DCP","[STATE] [TRIGGER] - [AS02] Trigger executed: "+i+" in scope Client-Side after checking exclude-triggers",!1,"AS02"),window.jentis.tracker.decideWhatToDoWithFrontendTags({scopeOfTheState:e,frontendTags:e.tagsWaitingBecauseOfExcludeTrigger[i],triggerName:i}),delete e.tagsWaitingBecauseOfExcludeTrigger[i]))}},this.startTracking=function(){window.jentis.config.trackingConsentGiven=!0,window.jentis.tracker.trackCachedEvents(),window.jentis.tracker.trackCachedFrontend()},this.denyTracking=function(){window.jentis.config.trackingConsentGiven=!1},this.isConsentGivenForVariable=function(e){if(void 0!==window.jentis.config.jtm.variables[e].vendorids)for(var t=0;t<window.jentis.config.jtm.variables[e].vendorids.length;t++){var r=window.jentis.config.jtm.variables[e].vendorids[t];if("*"===r||!0===window.jentis.consent.engine.getVendorConsent(r)||"ncm"===window.jentis.consent.engine.getVendorConsent(r))return!0}return!1},this.isVariableFromTypeHTTP=function(e,t,r){return void 0!==r._cacheForHTTPVariables&&void 0!==r._cacheForHTTPVariables.httpVariables&&void 0!==r._cacheForHTTPVariables.httpVariables[t]&&r._cacheForHTTPVariables.httpVariables[t].indexOf(e)>-1},this.isConsentGiven=function(e){if(void 0!==e){var t=window.jentis.consent.engine.getAllConsents();if(void 0!==t["*"])return!0;if(void 0!==t[e])return t[e]}return!1},this.checkLogMode=function(){null!=(window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.getItem("jts_log"):window.jentis.helper.readCookie("jts_log"))?this.bLogMode=!0:new RegExp("jts_log=([^&#]*)").test(document.location.search)&&(window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.setItem("jts_log",1):window.jentis.helper.setCookie({name:"jts_log",value:"1",exdays:365,sameSite:"Strict"}),this.bLogMode=!0)},this.checkDebug=function(){var e=this.fGetUrlParams(),t="jts_debug";if(void 0!==e.jts_debug){var r=e.jts_debug;window.jentis.config.frontend.debug=r,window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.setItem(t,r):window.jentis.helper.setCookie({name:t,value:r,exdays:null,sameSite:"Strict"})}else window.jentis.config.frontend.debug=null,window.jentis.helper.bIsLocalStorageAvailable?window.jentis.config.frontend.debug=window.sessionStorage.getItem(t):window.jentis.config.frontend.debug=window.jentis.helper.readCookie(t)},this.getPreviewVersion=function(){if(!1===window.jentis.tracker.sPreviewVersion){var e="";if("string"==typeof(e=window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.getItem(window.jentis.tracker.sPreviewStorageKey):window.jentis.helper.readCookie(window.jentis.tracker.sPreviewStorageKey))){var t=e.split("/");t.length>0&&(window.jentis.tracker.sPreviewVersion=t[0])}}return window.jentis.tracker.sPreviewVersion},this.getPreviewStorage=function(){return window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.getItem(window.jentis.tracker.sPreviewStorageKey):window.jentis.helper.readCookie(window.jentis.tracker.sPreviewStorageKey)},this.checkAutomationId=function(){var e=this.fGetUrlParams(),t=window.jentis.tracker.sAutomationIdKey;if(void 0!==e[t]){var r=e[t];window.jentis.tracker.sAutomationId=r,window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.setItem(t,r):window.jentis.helper.setCookie({name:t,value:r,exdays:null,sameSite:"Strict"})}},this.getAutomationId=function(){if(!1===window.jentis.tracker.sAutomationId){var e="";"string"==typeof(e=window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.getItem(window.jentis.tracker.sAutomationIdKey):window.jentis.helper.readCookie(window.jentis.tracker.sAutomationIdKey))&&(window.jentis.tracker.sAutomationId=e)}return window.jentis.tracker.sAutomationId},this.checkPreview=function(){var e=this.fGetUrlParams(),t=window.jentis.tracker.sPreviewStorageKey;if(void 0!==e.jts_preview){var r=e.jts_preview;void 0!==window.jentis.config.jtm.timestamp&&(r+="/"+window.jentis.config.jtm.timestamp),window.jentis.tracker.sPreviewVersion=e.jts_preview,window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.setItem(t,r):window.jentis.helper.setCookie({name:t,value:r,exdays:null,sameSite:"Strict"});var i="";for(var n in e)"jts_preview"!==n&&"jts_storage"!==n&&"jts_debug"!==n&&"jts_log"!==n&&(""!=i&&(i+="&"),i+=n+"="+encodeURIComponent(e[n]));return window.location.href=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+i,!1}var a=window.jentis.tracker.getPreviewStorage();if("string"==typeof a&&void 0!==window.jentis.config.jtm.timestamp){var o=a.split("/");if(window.jentis.config.jtm.timestamp.toString()!==o[1]){r=o[0]+"/"+window.jentis.config.jtm.timestamp;return window.jentis.helper.bIsLocalStorageAvailable?window.sessionStorage.setItem(t,r):window.jentis.helper.setCookie({name:t,value:r,exdays:null,sameSite:"Strict"}),window.location.reload(),!1}}return!0},this.log=function(e,t,r,i){!0===this.bLogMode&&(void 0===t?"object"==typeof e?(console.log("%o",e),!0===window.jentis.tracker.isLogAllowedToSendToMonitor(r)&&window.jentis.helper.sendLogToMonitor(JSON.stringify(e),i)):(console.log(e),!0===window.jentis.tracker.isLogAllowedToSendToMonitor(r)&&window.jentis.helper.sendLogToMonitor(e,i)):"object"==typeof t?(console.log(e+" : %o",t),!0===window.jentis.tracker.isLogAllowedToSendToMonitor(r)&&window.jentis.helper.sendLogToMonitor(e+": "+JSON.stringify(t),i)):(console.log(e+" : "+t),!0===window.jentis.tracker.isLogAllowedToSendToMonitor(r)&&window.jentis.helper.sendLogToMonitor(e+": "+t,i)))},this.isLogAllowedToSendToMonitor=function(e){return void 0===e||void 0!==e&&!1===e},this.logError=function(e,t){window.jentis.helper.logError("J-DCP",e,t)},this.initRawdata=function(){if(void 0===this.oCache[this.sStoragePrefix]){this.oCache[this.sStoragePrefix]={};var e=!1;if(window.jentis.helper.bIsLocalStorageAvailable){var t=window.jentis.helper.getLocalStorageItem("jentis.core.tracker.rawdata-controller");if(null!==t)try{this.oCache=t,void 0!==this.oCache[this.sStoragePrefix]&&void 0!==this.oCache[this.sStoragePrefix]["jentis.core.tracker.rawdata"]&&(this.oCache[this.sStoragePrefix]=this.oCache[this.sStoragePrefix]["jentis.core.tracker.rawdata"]),e=!0}catch(t){window.jentis.helper.sendErrorToLogSystem(t.stack,"J-Tracker>initRawdata - "+t.message),console.error(t),e=!1}}if(!1===e){var r=JSON.parse(window.jentis.helper.readCookie("jts-rw"));null!==r&&void 0!==r.u&&(this.oCache[this.sStoragePrefix]=this.oCache[this.sStoragePrefix]||{},this.oCache[this.sStoragePrefix].user=this.oCache[this.sStoragePrefix].user||{},this.oCache[this.sStoragePrefix].user._id=r.u)}}},this.readDocumentID=function(e){return void 0!==this.oCache[this.sStoragePrefix]&&void 0!==this.oCache[this.sStoragePrefix][e]?this.oCache[this.sStoragePrefix][e]._id:null},this.updateDocumentID=function(e,t){void 0===this.oCache[this.sStoragePrefix]&&(this.oCache[this.sStoragePrefix]={}),void 0===this.oCache[this.sStoragePrefix][e]&&(this.oCache[this.sStoragePrefix][e]={_id:t})},this.createDocumentID=function(e){void 0===this.oCache[this.sStoragePrefix]&&(this.oCache[this.sStoragePrefix]={});var t=this.getNewTrackId();return this.oCache[this.sStoragePrefix][e]={_id:t},t},this.sendDocumentsToDatareceiver=function(e,t,r,i){if(void 0===i&&(i=!0),e.length>0){window.jentis.tracker.log("J-DCP : SEND-DATA | State: "+t,e,!0);var n={},a=window.jentis.config.trackdomain.split(".");a[0]="";var o=a.join(".");n.client={clientTimestamp:Date.now(),domain:o};try{window.jentis.helper.bIsLocalStorageAvailable&&!0===i&&window.jentis.helper.setLocalStorageItem("jentis.core.tracker.rawdata-controller",this.oCache)}catch(e){window.jentis.tracker.log("J-DCP","No Storage available")}var s={};s.u=window.jentis.tracker.readDocumentID("user");var c=[],d={};if(!0===i){var g={name:"jts-rw",value:JSON.stringify(s),exdays:63072e3};1e3*g.exdays>window.jentis.config.jtm.maximumStorageLifetime&&(g.exdays=Math.round(window.jentis.config.jtm.maximumStorageLifetime/1e3)),c.push(g);for(var l=window.jentis.helper.getServerCookies(),_=l.length-1;_>=0;_--){var u=l[_];void 0!==u.name&&void 0===d[u.name]&&(1e3*u.exdays>window.jentis.config.jtm.maximumStorageLifetime&&(u.exdays=Math.round(window.jentis.config.jtm.maximumStorageLifetime/1e3)),c.push(l[_]),d[u.name]=!0)}}n.cmd={key:"setcookie",data:c},n.data=e,n.requestType=void 0!==r&&r?r:"XMLHttpRequest","sendBeacon"===r?this.sendBeaconStream({endpoint:"",data:JSON.stringify(n)}):this.sendHTTPStream({endpoint:"",data:JSON.stringify(n),callback:this.processCommandsFromDataReceiver,method:"POST",contentType:"application/json",withCredentials:!0})}},this.startHybridTrackingSynchronisation=function(){window.jentis.tracker.sendHTTPStream({endpoint:"/commands",data:JSON.stringify({userId:window.jentis.tracker.readDocumentID("user")}),callback:window.jentis.tracker.processCommandsFromDataReceiver,method:"POST",contentType:"application/json",withCredentials:!0}),window.setTimeout(window.jentis.tracker.startHybridTrackingSynchronisation,window.jentis.tracker.hybridTracking.timeout)},this.processCommandsFromDataReceiver=function(e){if("string"==typeof e.response)try{var t=JSON.parse(e.response);if(void 0!==t.requestIntervalSeconds&&(window.jentis.tracker.hybridTracking.timeout=1e3*t.requestIntervalSeconds),void 0!==window.jentis.tracker.hybridTracking.timeout&&void 0!==window.jentis.config.jtm.hybridTracking&&!0===window.jentis.config.jtm.hybridTracking&&!1===window.jentis.tracker.hybridTracking.enabled&&(window.jentis.tracker.hybridTracking.enabled=!0,window.jentis.tracker.startHybridTrackingSynchronisation()),void 0!==t.commands)for(var r=0;r<t.commands.length;r++)try{var i=Object.keys(t.commands[r]),n=window.jentis.tracker.accessDynamiclyVariable(i[0],window);"function"==typeof n&&(window.jentis.tracker.log("J-DCP","Hybrid-Tracking Received",!0),n.apply(window,[t.commands[r][i[0]]]))}catch(e){window.jentis.tracker.log("J-DCP","Warning: Command Returned throwed and Error! | Command: "+i[0])}}catch(e){window.jentis.tracker.log("J-DCP","Warning: processCommandsFromDataReceiver - JSON Invalid!",!0)}},this.sendHTTPStream=function(e){var t=e.callback,r=e.data,i=e.endpoint,n=void 0!==e.method?e.method:"GET",a=void 0!==e.url?e.url:window.jentis.config.trackdomain,o=void 0!==e.contentType?e.contentType:"application/json",s=void 0!==e.withCredentials&&e.withCredentials,c=void 0!==i?i:"",d=new XMLHttpRequest,g=r;d.open(n,a+c,!0),d.withCredentials=s,d.setRequestHeader("Content-type",o);var l=this;d.onreadystatechange=function(){4==d.readyState&&(200==d.status||window.jentis.tracker.log("J-DCP","[HTTP-Request] - Status: "+d.status,!0),"function"==typeof t&&t.apply(l,[d]))},d.send(g)},this.sendBeaconStream=function(e){var t=e.data,r=e.endpoint,i=void 0!==e.url?e.url:window.jentis.config.trackdomain,n=void 0!==r?r:"";"undefined"!=typeof navigator&&void 0!==navigator.sendBeacon&&navigator.sendBeacon(i+n,t)},this.getConsentStatus=function(){var e=window.jentis.consent.engine.getVendorFullData(),t={};for(var r in e)t[r]={},void 0!==e[r].category&&(t[r].category=e[r].category),void 0!==e[r].justification&&(t[r].justification=e[r].justification),void 0!==e[r].no_consent_mode&&(t[r].no_consent_mode=e[r].no_consent_mode),void 0!==e[r].status&&(t[r].status=e[r].status),void 0!==e[r].group&&(t[r].group=e[r].group),void 0!==e[r].initialTracking&&(t[r].initialTracking=e[r].initialTracking),void 0!==e[r].deniable&&(t[r].deniable=e[r].deniable);return t},this.getArrayFromObject=function(e){var t=[];for(var r in e)t.push(e[r]);return t},this.getObjectFromArray=function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t},this.getNow=function(){return(new Date).getTime()},this.getNewTrackId=function(){var e=this.getNow();return""+Math.round(1e5*Math.random())+e+Math.round(1e5*Math.random())},this.accessDynamiclyVariable=function(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:null}),t||self)},this.getDatalayer=function(e,t){var r=[];void 0===e&&(e=!0);for(var i=0;i<window._jts.length;i++)void 0!==window._jts[i].track&&(void 0!==t?window._jts[i].track===t&&(!0===e?r.push(window._jts[i]):r.push(window._jts[i].track)):!0===e?r.push(window._jts[i]):r.push(window._jts[i].track));return r},this.resetDatalayer=function(){var e=_jts.push,t=_jts.opush;_jts=[],_jts.push=e,_jts.opush=t},this.orderCodeblocks=function(e){var t=[],r=[],i=[];if(void 0!==window.jentis.config.jtm.codeblocks&&Object.keys(window.jentis.config.jtm.codeblocks).length>0)for(var n=0;n<e.length;n++)window.jentis.config.jtm.codeblocks[e[n]].id=e[n],void 0!==window.jentis.config.jtm.codeblocks[e[n]].order?t.push(window.jentis.config.jtm.codeblocks[e[n]]):r.push(window.jentis.config.jtm.codeblocks[e[n]]);return t.length>0&&(i=t.sort((function(e,t){return e.order-t.order}))),[].concat(i,r)},this.addElementToDOM=function(e,t){var r=document.createElement(e);r.innerHTML=t,(window.document.body||window.document.head).appendChild(r)},this.getValueOfFrontendVariable=function(e){return this.getValueOfVariable({variableName:e,triggerName:void 0,scopeOfTheState:window.jentis.tracker.createScopeOfTheStateObject()})},this.addEventListener=function(e,t){window.jentis.helper.addEventListener(e,t)},this.readCookie=function(e){return window.jentis.helper.readCookie(e)},this.setCookie=function(e){window.jentis.helper.setCookie(e)},this.setServerCookie=function(e){window.jentis.helper.setServerCookie(e)},this.fGetUrlParams=function(){return window.jentis.helper.fGetUrlParams()},this.cloneObject=function(e){return window.jentis.helper.cloneObject(e)}},window.jentis.tracker.init(),window.jentis.tracker.log("J-DCP","[INIT] - [AI01] Initialization finished: "+window.jentis.config.filehash,!1,"AI01")}catch(e){window.jentis.helper.sendErrorToLogSystem(e.stack,e.message),console.error(e)}